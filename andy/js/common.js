function getUrlVars(){for(var e,a=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)e=n[o].split("="),a.push(e[0]),a[e[0]]=e[1];return a}$(document).ready(function(){function e(){h()}function a(){$.address.value("/page1?scenes=3"),$(".q1ans").removeClass("on"),$(".databox .bar .light").attr("style",""),$(".databox .bar .cover").attr("style",""),$(".databoxin").mCustomScrollbar("scrollTo",0)}function n(){$(".p3s1gobtn").addClass("on");var e=$(".user_data");return v.senddata={mob:e.find(".user_phone").val(),email:e.find(".user_mail").val(),name:e.find(".user_name").val(),storeid:v.shopdata[v.nowCity].STORES[v.nowArea].ID,ccc:e.find(".user_code").val()},v.senddata.mob&&v.senddata.email&&v.senddata.name&&v.senddata.ccc&&$(".agreebox .checkbox").hasClass("on")?void $.ajax({url:v.backendurl+"api_save.ashx",type:"POST",dataType:"json",data:v.senddata,success:function(e){"OK"==e.RS?(v.page3scenes=2,c()):alert(e.RS),$(".p3s1gobtn").removeClass("on")},error:function(e,a,n){$(".p3s1gobtn").removeClass("on"),console.log("error:",e,a,n)}}):($(".agreebox .checkbox").hasClass("on")?alert(v.creatUsererrortxt):alert("請同意個資條款"),void $(".p3s1gobtn").removeClass("on"))}function o(){function e(c){var p=Math.floor(c.pageX-a.offset().left-n.width()/2);return p>t?void a.unbind("mousemove",e):0>p?void a.unbind("mousemove",e):(n.css("left",p),o.css("width",p),o.width()<=r?v.dragscore=Math.round(o.width()/r*5):v.dragscore=5+Math.round((o.width()-r)/r*15),void s())}var a=$(this),n=$(this).find(".light"),o=$(this).find(".cover"),t=a.width()-10,r=t/2;n.mousedown(function(n){a.bind("mousemove",e)}),n.mouseout(function(n){a.unbind("mousemove",e)}),n.mouseup(function(n){a.unbind("mousemove",e)})}function s(){v.nowscore=0;for(var e=0;e<$(".q1ans").length;e++)$(".q1ans").eq(e).hasClass("on")&&(v.nowscore=v.nowscore+1*$(".q1ans").eq(e).attr("data-score"));v.nowscore=v.nowscore+v.dragscore,v.nowscorepercent=Math.round(v.nowscore/85*100)-1,console.log("webData.dragscore:"+v.dragscore+"/webData.nowscore:"+v.nowscore+"/webData.nowscorepercent:"+v.nowscorepercent),v.prescore=v.nowscore}function t(e){e.parent().parent().hasClass("multi")?e.hasClass("on")?e.removeClass("on"):e.addClass("on"):(e.parent().parent().find(".q1ans").removeClass("on"),e.addClass("on")),s()}function r(e){e?$(".menuDom").addClass("on"):$(".menuDom").removeClass("on")}function c(){var e="";1!=v.page3scenes&&(e=" scenes"+v.page3scenes),$(".wrapperin .page3 .scenes_all").attr("class","scenes_all"+e),$(".scenes_all .scenes").removeClass("on"),$(".wrapperin .page3 .scenes_all .scenes").eq(v.page3scenes-1).addClass("on"),$(".wrapperin .page3 .scenes_all .scenes .content").hide(),v.page1hasplay?$(".wrapperin .page3 .scenes_all .scenes2 .btn1 a").hide().eq(1).show():$(".wrapperin .page3 .scenes_all .scenes2 .btn1 a").hide().eq(0).show(),v.pg3timeout&&clearTimeout(v.pg3timeout),v.pg3timeout=setTimeout(function(){$(".wrapperin .page3 .scenes_all .scenes").eq(v.page3scenes-1).find(".content").fadeIn()},1300)}function p(){var e="";1!=v.page1scenes&&(e=" scenes"+v.page1scenes),$(".wrapperin .page1 .scenes_all").attr("class","scenes_all"+e),$(".scenes_all .scenes").removeClass("on"),$(".wrapperin .page1 .scenes_all .scenes").eq(v.page1scenes-1).addClass("on"),2==v.page1scenes&&(v.nowscore=0,v.nowscorepercent=0,v.prescore=0,v.dragscore=0),l(3==v.page1scenes?!0:!1)}function l(e){var a=$(".wrapperin .page1 .scenes_all .scenes3");e?(v.page1hasplay=!0,a.find(".score").html(0),v.nowscorepercent<=40?a.find(".s").hide().eq(0).show():v.nowscorepercent>40&&v.nowscorepercent<=80?a.find(".s").hide().eq(1).show():v.nowscorepercent>80&&a.find(".s").hide().eq(2).show(),a.find(".content").hide(),v.pg1S3timeout&&clearTimeout(v.pg1S3timeout),v.pg1S3timeout=setTimeout(function(){a.find(".content").fadeIn(300,function(){d()})},1300)):a.find(".content").fadeOut()}function d(){var e=$(".wrapperin .page1 .scenes_all .scenes3 .score"),a=e.text();a<v.nowscorepercent&&(a=1*a+1,v.pg1S3timeout=setTimeout(function(){d()},33)),e.html(a)}function g(){2!=v.prepage&&4!=v.prepage&&2!=v.nowpage&&4!=v.nowpage||(2==v.nowpage||4==v.nowpage?(1!=v.prepage&&3!=v.prepage||v.wrp.find(".wrapperin").attr("class","wrapperin page"+v.prepage),$(".wrapper_top").find(".page").removeClass("on"),2!=v.prepage&&4!=v.prepage||$(".wrapper_top").find(".page").addClass("yes"),$(".wrapper_top").find(".page"+v.nowpage).addClass("on")):(v.wrp.find(".wrapperin").attr("class","wrapperin"),$(".wrapper_top").find(".page").removeClass("yes")),v.wrp.find(".wrapperin").addClass("off"),v.wrapperTimeout&&clearTimeout(v.wrapperTimeout),v.wrapperTimeout=setTimeout(function(){v.wrp.find(".wrapperin").removeClass("off")},v.pagespeed)),1==v.nowpage&&p(),3==v.nowpage?($(".footer .gobtn").fadeOut(),c()):$(".footer .gobtn").fadeIn(),v.wrp.attr("class","wrapper").addClass("page"+v.nowpage),v.prepage=v.nowpage}function u(){v.nowCity=0,$(".mapdata .city").html("");for(i in v.shopdata)$(".mapdata .city").append("<option>"+v.shopdata[i].city+"</option>");$(".mapdata .city").change(function(){v.nowCity=$(".mapdata .city option:selected").index(),w()}),$(".mapdata .area").change(function(){v.nowArea=$(".mapdata .area option:selected").index(),m()}),setTimeout(function(){w()},1500)}function w(){console.log("webData.nowCity:"+v.nowCity),v.nowArea=0,$(".mapdata .area").html("");for(i in v.shopdata[v.nowCity].STORES)$(".mapdata .area").append("<option>"+v.shopdata[v.nowCity].STORES[i].STORE+"</option>");m()}function m(){console.log("webData.nowArea:"+v.nowArea),$(".shop_addr").html(v.shopdata[v.nowCity].STORES[v.nowArea].ADDRESS);var e=v.shopdata[v.nowCity].STORES[v.nowArea];console.log("_shop.LAT:"+e.LAT+"/_shop.LNG:"+e.LNG),v.mapOptions={zoom:18,center:new google.maps.LatLng(e.LAT,e.LNG)},v.map=new google.maps.Map(document.getElementById("mapCanvas"),v.mapOptions);new google.maps.Marker({position:new google.maps.LatLng(e.LAT,e.LNG),map:v.map,icon:v.mapimage});v.map.setCenter(new google.maps.LatLng(e.LAT,e.LNG))}function h(){var e=Math.round(1e3*Math.random())+1;$(".user_code").parent().prepend('<img src="'+v.backendurl+"api_vcode.ashx?"+e+'" class="code">'),$.ajax({url:v.backendurl+"api_store.ashx",type:"POST",dataType:"json",success:function(e){v.shopdata=e.DATA,console.log(v.shopdata),b(!1),"OK"==e.RS?u():console.log(e.RS)},error:function(e,a,n){b(!1),console.log("error:",e,a,n)}})}function f(){var e=$.address.value();switch(e){case"/":window.location.href="index.html#/page1";break;case"/page1":console.log("牙齦急診室"),v.nowpage=1,v.page1scenes=1;break;case"/page1?scenes=2":console.log("牙齦緊急檢查"),v.nowpage=1,v.page1scenes=2;break;case"/page1?scenes=3":console.log("診斷結果"),v.nowpage=1,v.page1scenes=3;break;case"/page2":console.log("牙齦求診須知"),v.nowpage=2;break;case"/page3":console.log("立即索取"),v.nowpage=3,v.page3scenes=1;break;case"/page4":console.log("救救牙齦TVC"),v.nowpage=4}g()}function b(e){e?$(".loading").fadeIn():$(".loading").fadeOut()}var v={};v.wrp=$(".wrapper"),v.mainurl="http://2016parodontax.everydayhealth.com.tw/20160617/",v.backendurl="http://2016parodontax.everydayhealth.com.tw/xml/",v.mapimage="http://ml-andy.github.io/chinesechess/website/images/mapicon.png",v.creatUsererrortxt="請填寫完整資料",v.pagespeed=500,v.page1scenes=1,v.page3scenes=1,$(".databoxin").mCustomScrollbar({scrollInertia:300,scrollEasing:"linear"}),$(".page3 .scenes1 .content").mCustomScrollbar({scrollInertia:300,scrollEasing:"linear"}),v.nowscore=0,v.nowscorepercent=0,v.prescore=0,v.dragscore=0,v.page1hasplay=!1,$(".agreebox .checkbox").click(function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on")}),$(".p3s1gobtn").click(function(){$(this).hasClass("on")||n()}),$(".sure_btn").click(function(){a()}),$(".databox .bar").each(o),$(".q1ans").click(function(){t($(this))}),$(".start_btn").click(function(){$.address.value("/page1?scenes=2")}),$(".gobtn").click(function(){$(".menubtn").hasClass("on")&&$(".menubtn").trigger("click")}),$(".menua").click(function(){$(".menubtn").trigger("click")}),$(".menubtn").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),r(!1)):($(this).addClass("on"),r(!0))}),$.address.change(f),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJnZXRVcmxWYXJzIiwiaGFzaCIsInZhcnMiLCJoYXNoZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzbGljZSIsImluZGV4T2YiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJwdXNoIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJ3aW5kb3dMb2FkIiwid2luZG93SW5pdCIsInAxczJzdXJlIiwiYWRkcmVzcyIsInZhbHVlIiwicmVtb3ZlQ2xhc3MiLCJhdHRyIiwibUN1c3RvbVNjcm9sbGJhciIsInNlbmREYXRhIiwiYWRkQ2xhc3MiLCJfdXNlcl9kYXRhIiwid2ViRGF0YSIsInNlbmRkYXRhIiwibW9iIiwiZmluZCIsInZhbCIsImVtYWlsIiwibmFtZSIsInN0b3JlaWQiLCJzaG9wZGF0YSIsIm5vd0NpdHkiLCJTVE9SRVMiLCJub3dBcmVhIiwiSUQiLCJjY2MiLCJoYXNDbGFzcyIsImFqYXgiLCJ1cmwiLCJiYWNrZW5kdXJsIiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJSUyIsInBhZ2Uzc2NlbmVzIiwiY2hhbmdlcGFnZTNTY2VuZXMiLCJhbGVydCIsImVycm9yIiwieGhyIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiY29uc29sZSIsImxvZyIsImNyZWF0VXNlcmVycm9ydHh0IiwiZGF0YWJveEJhciIsImRyYWdtb3ZlIiwiZSIsImxmdCIsIk1hdGgiLCJmbG9vciIsInBhZ2VYIiwiYmFyIiwib2Zmc2V0IiwibGVmdCIsImRyYWciLCJ3aWR0aCIsIl93aWR0aCIsInVuYmluZCIsImNzcyIsImNvdmVyIiwiX3dpZHRoNTAiLCJkcmFnc2NvcmUiLCJyb3VuZCIsImNvdW50U2NvcmVfdHJ1ZSIsInRoaXMiLCJtb3VzZWRvd24iLCJiaW5kIiwibW91c2VvdXQiLCJtb3VzZXVwIiwibm93c2NvcmUiLCJlcSIsIm5vd3Njb3JlcGVyY2VudCIsInByZXNjb3JlIiwiY291bnRTY29yZSIsIl9vIiwicGFyZW50Iiwic2hvd21lbnUiLCJfdCIsIl90bXAiLCJoaWRlIiwicGFnZTFoYXNwbGF5Iiwic2hvdyIsInBnM3RpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZmFkZUluIiwiY2hhbmdlcGFnZTFTY2VuZXMiLCJwYWdlMXNjZW5lcyIsInBhZ2Uxc2VjZW5lczNhbmkiLCJfc2NlbmVzMyIsImh0bWwiLCJwZzFTM3RpbWVvdXQiLCJwYWdlMXNlY2VuZXMzU2NvcmVhbmkiLCJmYWRlT3V0IiwiX3Njb3JlIiwiX25vd251bWJlciIsInRleHQiLCJjaGFuZ2VQYWdlIiwicHJlcGFnZSIsIm5vd3BhZ2UiLCJ3cnAiLCJ3cmFwcGVyVGltZW91dCIsInBhZ2VzcGVlZCIsImluaXRNYXAiLCJhcHBlbmQiLCJjaXR5IiwiY2hhbmdlIiwiaW5kZXgiLCJjaGFuZ2VDaXR5IiwiY2hhbmdlQXJlYSIsIlNUT1JFIiwiQUREUkVTUyIsIl9zaG9wIiwiTEFUIiwiTE5HIiwibWFwT3B0aW9ucyIsInpvb20iLCJjZW50ZXIiLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwibWFwIiwiTWFwIiwiZ2V0RWxlbWVudEJ5SWQiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJtYXBpbWFnZSIsInNldENlbnRlciIsIl9yYW5kb20iLCJyYW5kb20iLCJwcmVwZW5kIiwiREFUQSIsInNob3dMb2FkaW5nIiwiYWRkckNoYW5nZSIsIm1haW51cmwiLCJzY3JvbGxJbmVydGlhIiwic2Nyb2xsRWFzaW5nIiwiY2xpY2siLCJlYWNoIiwidHJpZ2dlciIsImxvYWQiXSwibWFwcGluZ3MiOiJBQTJVQSxRQUFTQSxjQUVMLElBQUksR0FEUUMsR0FBUkMsS0FBaUJDLEVBQU9DLE9BQU9DLFNBQVNDLEtBQUtDLE1BQU1ILE9BQU9DLFNBQVNDLEtBQUtFLFFBQVEsS0FBSyxHQUFHQyxNQUFNLEtBQzFGQyxFQUFFLEVBQUVBLEVBQUVQLEVBQU9RLE9BQU9ELElBQUtULEVBQUtFLEVBQU9PLEdBQUdELE1BQU0sS0FB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UCxFQUFFLFVBQVU2SSxNQUFNLFdBQWM3SSxFQUFFLFlBQVk0QixTQUFTLE9BQU81QixFQUFFLFlBQVkrSSxRQUFRLFdBQ3BGL0ksRUFBRSxVQUFVNkksTUFBTSxXQUFXN0ksRUFBRSxZQUFZK0ksUUFBUSxXQUN0RC9JLEVBQUUsWUFBWTZJLE1BQU0sV0FDaEI3SSxFQUFFbUUsTUFBTXZDLFNBQVMsT0FBTzVCLEVBQUVtRSxNQUFNM0QsWUFBWSxNQUFNdUUsR0FBUyxLQUN4RC9FLEVBQUVtRSxNQUFNdkQsU0FBUyxNQUFPbUUsR0FBUyxNQUVyQy9FLEVBQUVNLFFBQVF1RyxPQUFPNEIsR0FDcEJ6SSxFQUFFVCxRQUFReUosS0FBSzdJIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0dmFyIHdlYkRhdGEgPXt9O1x0XHJcblxyXG5cdC8vSW5pdFxyXG5cdHdlYkRhdGEud3JwPSQoJy53cmFwcGVyJyk7XHJcbiAgICB3ZWJEYXRhLm1haW51cmwgPSAnaHR0cDovLzIwMTZwYXJvZG9udGF4LmV2ZXJ5ZGF5aGVhbHRoLmNvbS50dy8yMDE2MDYxNy8nO1xyXG4gICAgd2ViRGF0YS5iYWNrZW5kdXJsID0gJ2h0dHA6Ly8yMDE2cGFyb2RvbnRheC5ldmVyeWRheWhlYWx0aC5jb20udHcveG1sLyc7XHJcbiAgICB3ZWJEYXRhLm1hcGltYWdlID0gJ2h0dHA6Ly9tbC1hbmR5LmdpdGh1Yi5pby9jaGluZXNlY2hlc3Mvd2Vic2l0ZS9pbWFnZXMvbWFwaWNvbi5wbmcnO1xyXG4gICAgd2ViRGF0YS5jcmVhdFVzZXJlcnJvcnR4dCA9IFwi6KuL5aGr5a+r5a6M5pW06LOH5paZXCI7XHJcblx0d2ViRGF0YS5wYWdlc3BlZWQgPSA1MDA7XHJcbiAgICB3ZWJEYXRhLnBhZ2Uxc2NlbmVzID0gMTtcclxuICAgIHdlYkRhdGEucGFnZTNzY2VuZXMgPSAxO1xyXG4gICAgJChcIi5kYXRhYm94aW5cIikubUN1c3RvbVNjcm9sbGJhcih7c2Nyb2xsSW5lcnRpYTozMDAsc2Nyb2xsRWFzaW5nOidsaW5lYXInfSk7XHJcbiAgICAkKFwiLnBhZ2UzIC5zY2VuZXMxIC5jb250ZW50XCIpLm1DdXN0b21TY3JvbGxiYXIoe3Njcm9sbEluZXJ0aWE6MzAwLHNjcm9sbEVhc2luZzonbGluZWFyJ30pO1xyXG4gICAgLy9TQ09SRSBJTklUXHJcbiAgICB3ZWJEYXRhLm5vd3Njb3JlID0gMDtcclxuICAgIHdlYkRhdGEubm93c2NvcmVwZXJjZW50ID0gMDtcclxuICAgIHdlYkRhdGEucHJlc2NvcmUgPSAwO1xyXG4gICAgd2ViRGF0YS5kcmFnc2NvcmUgPSAwO1xyXG4gICAgd2ViRGF0YS5wYWdlMWhhc3BsYXkgPSBmYWxzZTsgICAgXHJcblxyXG5cdC8vQWRkTGlzdGVuZXJcclxuICAgICQoJy5hZ3JlZWJveCAuY2hlY2tib3gnKS5jbGljayhmdW5jdGlvbigpe2lmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpeyQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJyk7fWVsc2V7JCh0aGlzKS5hZGRDbGFzcygnb24nKTt9fSk7XHJcbiAgICAkKCcucDNzMWdvYnRuJykuY2xpY2soZnVuY3Rpb24oKXtpZighJCh0aGlzKS5oYXNDbGFzcygnb24nKSkgc2VuZERhdGEoKTt9KTtcclxuICAgICQoJy5zdXJlX2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7cDFzMnN1cmUoKTt9KTtcclxuICAgICQoJy5kYXRhYm94IC5iYXInKS5lYWNoKGRhdGFib3hCYXIpO1xyXG4gICAgJCgnLnExYW5zJykuY2xpY2soZnVuY3Rpb24oKXtjb3VudFNjb3JlKCQodGhpcykpO30pO1xyXG4gICAgJCgnLnN0YXJ0X2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7JC5hZGRyZXNzLnZhbHVlKFwiL3BhZ2UxP3NjZW5lcz0yXCIpO30pO1xyXG4gICAgJCgnLmdvYnRuJykuY2xpY2soZnVuY3Rpb24oKXtpZigkKCcubWVudWJ0bicpLmhhc0NsYXNzKCdvbicpKSAkKCcubWVudWJ0bicpLnRyaWdnZXIoJ2NsaWNrJyk7fSk7XHJcbiAgICAkKCcubWVudWEnKS5jbGljayhmdW5jdGlvbigpeyQoJy5tZW51YnRuJykudHJpZ2dlcignY2xpY2snKTt9KTtcdFxyXG5cdCQoJy5tZW51YnRuJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoJ29uJykpeyQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJyk7c2hvd21lbnUoZmFsc2UpO31cclxuXHRcdGVsc2UgeyQodGhpcykuYWRkQ2xhc3MoJ29uJyk7IHNob3dtZW51KHRydWUpO31cclxuXHR9KTtcclxuICAgICQuYWRkcmVzcy5jaGFuZ2UoYWRkckNoYW5nZSk7XHJcblx0JCh3aW5kb3cpLmxvYWQod2luZG93TG9hZCk7XHJcblx0ZnVuY3Rpb24gd2luZG93TG9hZCgpe1xyXG4gICAgICAgIHdpbmRvd0luaXQoKTtcclxuXHJcblx0fVxyXG4gICAgXHJcblxyXG5cclxuICAgIC8vRWV2ZW50XHJcbiAgICBmdW5jdGlvbiBwMXMyc3VyZSgpe1xyXG4gICAgICAgICQuYWRkcmVzcy52YWx1ZShcIi9wYWdlMT9zY2VuZXM9M1wiKTtcclxuICAgICAgICAkKCcucTFhbnMnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAkKCcuZGF0YWJveCAuYmFyIC5saWdodCcpLmF0dHIoJ3N0eWxlJywnJyk7XHJcbiAgICAgICAgJCgnLmRhdGFib3ggLmJhciAuY292ZXInKS5hdHRyKCdzdHlsZScsJycpO1xyXG4gICAgICAgICQoJy5kYXRhYm94aW4nKS5tQ3VzdG9tU2Nyb2xsYmFyKCdzY3JvbGxUbycsMCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZW5kRGF0YSgpe1xyXG4gICAgICAgICQoJy5wM3MxZ29idG4nKS5hZGRDbGFzcygnb24nKTtcclxuICAgICAgICB2YXIgX3VzZXJfZGF0YSA9ICQoJy51c2VyX2RhdGEnKTtcclxuICAgICAgICB3ZWJEYXRhLnNlbmRkYXRhID0ge1xyXG4gICAgICAgICAgICBtb2I6X3VzZXJfZGF0YS5maW5kKCcudXNlcl9waG9uZScpLnZhbCgpLFxyXG4gICAgICAgICAgICBlbWFpbDpfdXNlcl9kYXRhLmZpbmQoJy51c2VyX21haWwnKS52YWwoKSxcclxuICAgICAgICAgICAgbmFtZTpfdXNlcl9kYXRhLmZpbmQoJy51c2VyX25hbWUnKS52YWwoKSxcclxuICAgICAgICAgICAgc3RvcmVpZDp3ZWJEYXRhLnNob3BkYXRhW3dlYkRhdGEubm93Q2l0eV0uU1RPUkVTW3dlYkRhdGEubm93QXJlYV0uSUQsXHJcbiAgICAgICAgICAgIGNjYzpfdXNlcl9kYXRhLmZpbmQoJy51c2VyX2NvZGUnKS52YWwoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighd2ViRGF0YS5zZW5kZGF0YS5tb2IgfHwgIXdlYkRhdGEuc2VuZGRhdGEuZW1haWwgfHwgIXdlYkRhdGEuc2VuZGRhdGEubmFtZSB8fCAhd2ViRGF0YS5zZW5kZGF0YS5jY2MgfHwgISQoJy5hZ3JlZWJveCAuY2hlY2tib3gnKS5oYXNDbGFzcygnb24nKSl7XHJcbiAgICAgICAgICAgIGlmKCEkKCcuYWdyZWVib3ggLmNoZWNrYm94JykuaGFzQ2xhc3MoJ29uJykpIGFsZXJ0KFwi6KuL5ZCM5oSP5YCL6LOH5qKd5qy+XCIpO1xyXG4gICAgICAgICAgICBlbHNlIGFsZXJ0KHdlYkRhdGEuY3JlYXRVc2VyZXJyb3J0eHQpOyAgICAgICAgICBcclxuICAgICAgICAgICAgJCgnLnAzczFnb2J0bicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogd2ViRGF0YS5iYWNrZW5kdXJsICsgJ2FwaV9zYXZlLmFzaHgnLFxyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6d2ViRGF0YS5zZW5kZGF0YSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5SUz09XCJPS1wiKXtcclxuICAgICAgICAgICAgICAgICAgICB3ZWJEYXRhLnBhZ2Uzc2NlbmVzPTI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcGFnZTNTY2VuZXMoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGFsZXJ0KGRhdGEuUlMpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnAzczFnb2J0bicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgICAgICAgICB9LGVycm9yOiBmdW5jdGlvbih4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucDNzMWdvYnRuJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOlwiLCB4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZGF0YWJveEJhcigpe1xyXG4gICAgICAgIHZhciBiYXIgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICBkcmFnID0gJCh0aGlzKS5maW5kKCcubGlnaHQnKSxcclxuICAgICAgICAgICAgY292ZXIgPSAkKHRoaXMpLmZpbmQoJy5jb3ZlcicpLFxyXG4gICAgICAgICAgICBfd2lkdGggPSBiYXIud2lkdGgoKSAtIDEwLFxyXG4gICAgICAgICAgICBfd2lkdGg1MCA9IF93aWR0aCAvIDI7XHJcbiAgICAgICAgZHJhZy5tb3VzZWRvd24oZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGJhci5iaW5kKCdtb3VzZW1vdmUnLCBkcmFnbW92ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJhZy5tb3VzZW91dChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgYmFyLnVuYmluZCgnbW91c2Vtb3ZlJywgZHJhZ21vdmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRyYWcubW91c2V1cChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgYmFyLnVuYmluZCgnbW91c2Vtb3ZlJywgZHJhZ21vdmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZ1bmN0aW9uIGRyYWdtb3ZlKGUpe1xyXG4gICAgICAgICAgICB2YXIgbGZ0ID0gTWF0aC5mbG9vcihlLnBhZ2VYLWJhci5vZmZzZXQoKS5sZWZ0IC0gKGRyYWcud2lkdGgoKSAvIDIpKTtcclxuICAgICAgICAgICAgaWYobGZ0Pl93aWR0aCl7XHJcbiAgICAgICAgICAgICAgICBiYXIudW5iaW5kKCdtb3VzZW1vdmUnLCBkcmFnbW92ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGxmdDwwKXtcclxuICAgICAgICAgICAgICAgIGJhci51bmJpbmQoJ21vdXNlbW92ZScsIGRyYWdtb3ZlKTtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRyYWcuY3NzKCdsZWZ0JyxsZnQpO1xyXG4gICAgICAgICAgICBjb3Zlci5jc3MoJ3dpZHRoJyxsZnQpO1xyXG4gICAgICAgICAgICBpZihjb3Zlci53aWR0aCgpIDw9IF93aWR0aDUwKSB3ZWJEYXRhLmRyYWdzY29yZSA9IE1hdGgucm91bmQoY292ZXIud2lkdGgoKSAvIF93aWR0aDUwICogNSk7XHJcbiAgICAgICAgICAgIGVsc2Ugd2ViRGF0YS5kcmFnc2NvcmUgPSA1ICsgTWF0aC5yb3VuZCgoY292ZXIud2lkdGgoKS1fd2lkdGg1MCkgLyBfd2lkdGg1MCAqIDE1KTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgY291bnRTY29yZV90cnVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY291bnRTY29yZV90cnVlKCl7XHJcbiAgICAgICAgd2ViRGF0YS5ub3dzY29yZSA9IDA7XHJcbiAgICAgICAgLy9pdGVtXHJcbiAgICAgICAgZm9yKHZhciBpPTA7aTwkKCcucTFhbnMnKS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgaWYoJCgnLnExYW5zJykuZXEoaSkuaGFzQ2xhc3MoJ29uJykpIHdlYkRhdGEubm93c2NvcmUgPSB3ZWJEYXRhLm5vd3Njb3JlICsgJCgnLnExYW5zJykuZXEoaSkuYXR0cignZGF0YS1zY29yZScpKjE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZHJhZ1xyXG4gICAgICAgIHdlYkRhdGEubm93c2NvcmUgPSB3ZWJEYXRhLm5vd3Njb3JlICsgd2ViRGF0YS5kcmFnc2NvcmU7XHJcbiAgICAgICAgd2ViRGF0YS5ub3dzY29yZXBlcmNlbnQgPSBNYXRoLnJvdW5kKHdlYkRhdGEubm93c2NvcmUgLyA4NSAgKiAxMDApIC0gMTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIndlYkRhdGEuZHJhZ3Njb3JlOlwiICsgd2ViRGF0YS5kcmFnc2NvcmUgKyBcIi9cIiArIFwid2ViRGF0YS5ub3dzY29yZTpcIit3ZWJEYXRhLm5vd3Njb3JlICsgXCIvXCIgKyBcIndlYkRhdGEubm93c2NvcmVwZXJjZW50OlwiICt3ZWJEYXRhLm5vd3Njb3JlcGVyY2VudCk7XHJcbiAgICAgICAgd2ViRGF0YS5wcmVzY29yZSA9IHdlYkRhdGEubm93c2NvcmU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjb3VudFNjb3JlKF9vKXtcclxuICAgICAgICBpZihfby5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnbXVsdGknKSl7XHJcbiAgICAgICAgICAgIC8vbXVsdGlwbGUgXHJcbiAgICAgICAgICAgIGlmKF9vLmhhc0NsYXNzKCdvbicpKSBfby5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAgICAgZWxzZSBfby5hZGRDbGFzcygnb24nKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9zaW5nbGVcclxuICAgICAgICAgICAgX28ucGFyZW50KCkucGFyZW50KCkuZmluZCgnLnExYW5zJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgIF9vLmFkZENsYXNzKCdvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3VudFNjb3JlX3RydWUoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNob3dtZW51KF90KXtcclxuICAgIFx0aWYoX3Qpe1xyXG4gICAgXHRcdCQoJy5tZW51RG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICBcdH1lbHNle1xyXG4gICAgXHRcdCQoJy5tZW51RG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICBcdH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoYW5nZXBhZ2UzU2NlbmVzKCl7XHJcbiAgICAgICAgdmFyIF90bXAgPSAnJzsgICAgICAgIFxyXG4gICAgICAgIGlmKHdlYkRhdGEucGFnZTNzY2VuZXMhPTEpIF90bXAgPSAnIHNjZW5lcycgKyB3ZWJEYXRhLnBhZ2Uzc2NlbmVzO1xyXG4gICAgICAgICQoJy53cmFwcGVyaW4gLnBhZ2UzIC5zY2VuZXNfYWxsJykuYXR0cignY2xhc3MnLCdzY2VuZXNfYWxsJyArIF90bXApO1xyXG4gICAgICAgICQoJy5zY2VuZXNfYWxsIC5zY2VuZXMnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAkKCcud3JhcHBlcmluIC5wYWdlMyAuc2NlbmVzX2FsbCAuc2NlbmVzJykuZXEod2ViRGF0YS5wYWdlM3NjZW5lcy0xKS5hZGRDbGFzcygnb24nKTtcclxuICAgICAgICAkKCcud3JhcHBlcmluIC5wYWdlMyAuc2NlbmVzX2FsbCAuc2NlbmVzIC5jb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgIGlmKHdlYkRhdGEucGFnZTFoYXNwbGF5KSAkKCcud3JhcHBlcmluIC5wYWdlMyAuc2NlbmVzX2FsbCAuc2NlbmVzMiAuYnRuMSBhJykuaGlkZSgpLmVxKDEpLnNob3coKTtcclxuICAgICAgICBlbHNlICQoJy53cmFwcGVyaW4gLnBhZ2UzIC5zY2VuZXNfYWxsIC5zY2VuZXMyIC5idG4xIGEnKS5oaWRlKCkuZXEoMCkuc2hvdygpO1xyXG4gICAgICAgIGlmKHdlYkRhdGEucGczdGltZW91dCkgY2xlYXJUaW1lb3V0KHdlYkRhdGEucGczdGltZW91dCk7XHJcbiAgICAgICAgd2ViRGF0YS5wZzN0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcud3JhcHBlcmluIC5wYWdlMyAuc2NlbmVzX2FsbCAuc2NlbmVzJykuZXEod2ViRGF0YS5wYWdlM3NjZW5lcy0xKS5maW5kKCcuY29udGVudCcpLmZhZGVJbigpO1xyXG4gICAgICAgIH0sMTMwMCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VwYWdlMVNjZW5lcygpe1xyXG4gICAgICAgIHZhciBfdG1wID0gJyc7ICAgICAgICBcclxuICAgICAgICBpZih3ZWJEYXRhLnBhZ2Uxc2NlbmVzIT0xKSBfdG1wID0gJyBzY2VuZXMnICsgd2ViRGF0YS5wYWdlMXNjZW5lcztcclxuICAgICAgICAkKCcud3JhcHBlcmluIC5wYWdlMSAuc2NlbmVzX2FsbCcpLmF0dHIoJ2NsYXNzJywnc2NlbmVzX2FsbCcgKyBfdG1wKTtcclxuICAgICAgICAkKCcuc2NlbmVzX2FsbCAuc2NlbmVzJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgJCgnLndyYXBwZXJpbiAucGFnZTEgLnNjZW5lc19hbGwgLnNjZW5lcycpLmVxKHdlYkRhdGEucGFnZTFzY2VuZXMtMSkuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgaWYod2ViRGF0YS5wYWdlMXNjZW5lcz09Mil7XHJcbiAgICAgICAgICAgIHdlYkRhdGEubm93c2NvcmUgPSAwO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLm5vd3Njb3JlcGVyY2VudCA9IDA7XHJcbiAgICAgICAgICAgIHdlYkRhdGEucHJlc2NvcmUgPSAwO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLmRyYWdzY29yZSA9IDA7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHdlYkRhdGEucGFnZTFzY2VuZXM9PTMpIHBhZ2Uxc2VjZW5lczNhbmkodHJ1ZSk7XHJcbiAgICAgICAgZWxzZSBwYWdlMXNlY2VuZXMzYW5pKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhZ2Uxc2VjZW5lczNhbmkoX3Qpe1xyXG4gICAgICAgIHZhciBfc2NlbmVzMyA9ICQoJy53cmFwcGVyaW4gLnBhZ2UxIC5zY2VuZXNfYWxsIC5zY2VuZXMzJyk7ICAgICAgICBcclxuICAgICAgICBpZihfdCl7XHJcbiAgICAgICAgICAgIHdlYkRhdGEucGFnZTFoYXNwbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3NjZW5lczMuZmluZCgnLnNjb3JlJykuaHRtbCgwKTtcclxuICAgICAgICAgICAgaWYod2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ8PTQwKSBfc2NlbmVzMy5maW5kKCcucycpLmhpZGUoKS5lcSgwKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYod2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ+NDAgJiYgd2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ8PTgwKSBfc2NlbmVzMy5maW5kKCcucycpLmhpZGUoKS5lcSgxKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYod2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ+ODApIF9zY2VuZXMzLmZpbmQoJy5zJykuaGlkZSgpLmVxKDIpLnNob3coKTtcclxuICAgICAgICAgICAgX3NjZW5lczMuZmluZCgnLmNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGlmKHdlYkRhdGEucGcxUzN0aW1lb3V0KSBjbGVhclRpbWVvdXQod2ViRGF0YS5wZzFTM3RpbWVvdXQpO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLnBnMVMzdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBfc2NlbmVzMy5maW5kKCcuY29udGVudCcpLmZhZGVJbigzMDAsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlMXNlY2VuZXMzU2NvcmVhbmkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LDEzMDApO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBfc2NlbmVzMy5maW5kKCcuY29udGVudCcpLmZhZGVPdXQoKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhZ2Uxc2VjZW5lczNTY29yZWFuaSgpe1xyXG4gICAgICAgIHZhciBfc2NvcmUgPSAkKCcud3JhcHBlcmluIC5wYWdlMSAuc2NlbmVzX2FsbCAuc2NlbmVzMyAuc2NvcmUnKTtcclxuICAgICAgICB2YXIgX25vd251bWJlciA9IF9zY29yZS50ZXh0KCk7XHJcbiAgICAgICAgaWYoX25vd251bWJlciA8IHdlYkRhdGEubm93c2NvcmVwZXJjZW50KXtcclxuICAgICAgICAgICAgX25vd251bWJlcj1fbm93bnVtYmVyKjEgKyAxOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB3ZWJEYXRhLnBnMVMzdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtwYWdlMXNlY2VuZXMzU2NvcmVhbmkoKTt9LDMzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3Njb3JlLmh0bWwoX25vd251bWJlcik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VQYWdlKCl7XHJcbiAgICBcdGlmKHdlYkRhdGEucHJlcGFnZSA9PTIgfHwgd2ViRGF0YS5wcmVwYWdlID09NCB8fCB3ZWJEYXRhLm5vd3BhZ2UgPT0yIHx8IHdlYkRhdGEubm93cGFnZSA9PTQpe1xyXG4gICAgXHRcdGlmKHdlYkRhdGEubm93cGFnZSA9PTIgfHwgd2ViRGF0YS5ub3dwYWdlID09NCl7XHJcbiAgICBcdFx0XHRpZih3ZWJEYXRhLnByZXBhZ2U9PTEgfHwgd2ViRGF0YS5wcmVwYWdlPT0zKSB3ZWJEYXRhLndycC5maW5kKCcud3JhcHBlcmluJykuYXR0cignY2xhc3MnLCd3cmFwcGVyaW4gcGFnZScgKyB3ZWJEYXRhLnByZXBhZ2UpO1xyXG4gICAgXHRcdFx0JCgnLndyYXBwZXJfdG9wJykuZmluZCgnLnBhZ2UnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgIFx0XHRcdGlmKHdlYkRhdGEucHJlcGFnZSA9PTIgfHwgd2ViRGF0YS5wcmVwYWdlID09NCkgJCgnLndyYXBwZXJfdG9wJykuZmluZCgnLnBhZ2UnKS5hZGRDbGFzcygneWVzJyk7XHJcbiAgICBcdFx0XHQkKCcud3JhcHBlcl90b3AnKS5maW5kKCcucGFnZScgKyB3ZWJEYXRhLm5vd3BhZ2UpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRlbHNle1xyXG4gICAgXHRcdFx0d2ViRGF0YS53cnAuZmluZCgnLndyYXBwZXJpbicpLmF0dHIoJ2NsYXNzJywnd3JhcHBlcmluJyk7XHJcbiAgICBcdFx0XHQkKCcud3JhcHBlcl90b3AnKS5maW5kKCcucGFnZScpLnJlbW92ZUNsYXNzKCd5ZXMnKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0d2ViRGF0YS53cnAuZmluZCgnLndyYXBwZXJpbicpLmFkZENsYXNzKCdvZmYnKTtcclxuICAgIFx0XHRpZih3ZWJEYXRhLndyYXBwZXJUaW1lb3V0KSBjbGVhclRpbWVvdXQod2ViRGF0YS53cmFwcGVyVGltZW91dCk7XHJcbiAgICBcdFx0d2ViRGF0YS53cmFwcGVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXt3ZWJEYXRhLndycC5maW5kKCcud3JhcHBlcmluJykucmVtb3ZlQ2xhc3MoJ29mZicpO30sd2ViRGF0YS5wYWdlc3BlZWQpO1xyXG4gICAgXHR9XHJcbiAgICAgICAgaWYod2ViRGF0YS5ub3dwYWdlPT0xKSBjaGFuZ2VwYWdlMVNjZW5lcygpO1xyXG4gICAgICAgIGlmKHdlYkRhdGEubm93cGFnZT09Myl7XHJcbiAgICAgICAgICAgICQoJy5mb290ZXIgLmdvYnRuJykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICBjaGFuZ2VwYWdlM1NjZW5lcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICQoJy5mb290ZXIgLmdvYnRuJykuZmFkZUluKCk7XHJcbiAgICBcdHdlYkRhdGEud3JwLmF0dHIoJ2NsYXNzJywnd3JhcHBlcicpLmFkZENsYXNzKCdwYWdlJyArIHdlYkRhdGEubm93cGFnZSk7XHJcbiAgICBcdHdlYkRhdGEucHJlcGFnZSA9IHdlYkRhdGEubm93cGFnZTsgICAgXHRcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGluaXRNYXAoKXtcclxuICAgICAgICAvL0luc2VydCBDaXR5IERhdGFcclxuICAgICAgICB3ZWJEYXRhLm5vd0NpdHkgPSAwOyAgICAgICAgXHJcbiAgICAgICAgJCgnLm1hcGRhdGEgLmNpdHknKS5odG1sKCcnKTtcclxuICAgICAgICBmb3IoaSBpbiB3ZWJEYXRhLnNob3BkYXRhKSAkKCcubWFwZGF0YSAuY2l0eScpLmFwcGVuZCgnPG9wdGlvbj4nKyB3ZWJEYXRhLnNob3BkYXRhW2ldLmNpdHkgKyc8L29wdGlvbj4nKTtcclxuICAgICAgICAkKCcubWFwZGF0YSAuY2l0eScpLmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB3ZWJEYXRhLm5vd0NpdHkgPSAkKCcubWFwZGF0YSAuY2l0eSBvcHRpb246c2VsZWN0ZWQnKS5pbmRleCgpO1xyXG4gICAgICAgICAgICBjaGFuZ2VDaXR5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLm1hcGRhdGEgLmFyZWEnKS5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgd2ViRGF0YS5ub3dBcmVhID0gJCgnLm1hcGRhdGEgLmFyZWEgb3B0aW9uOnNlbGVjdGVkJykuaW5kZXgoKTtcclxuICAgICAgICAgICAgY2hhbmdlQXJlYSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL1N0YXJ0XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2NoYW5nZUNpdHkoKTt9LDE1MDApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlQ2l0eSgpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwid2ViRGF0YS5ub3dDaXR5OlwiK3dlYkRhdGEubm93Q2l0eSk7XHJcbiAgICAgICAgd2ViRGF0YS5ub3dBcmVhID0gMDtcclxuICAgICAgICAkKCcubWFwZGF0YSAuYXJlYScpLmh0bWwoJycpO1xyXG4gICAgICAgIGZvcihpIGluIHdlYkRhdGEuc2hvcGRhdGFbd2ViRGF0YS5ub3dDaXR5XS5TVE9SRVMpICQoJy5tYXBkYXRhIC5hcmVhJykuYXBwZW5kKCc8b3B0aW9uPicrIHdlYkRhdGEuc2hvcGRhdGFbd2ViRGF0YS5ub3dDaXR5XS5TVE9SRVNbaV0uU1RPUkUgKyc8L29wdGlvbj4nKTtcclxuICAgICAgICBjaGFuZ2VBcmVhKCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VBcmVhKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ3ZWJEYXRhLm5vd0FyZWE6XCIrd2ViRGF0YS5ub3dBcmVhKTtcclxuICAgICAgICAkKCcuc2hvcF9hZGRyJykuaHRtbCh3ZWJEYXRhLnNob3BkYXRhW3dlYkRhdGEubm93Q2l0eV0uU1RPUkVTW3dlYkRhdGEubm93QXJlYV0uQUREUkVTUyk7XHJcbiAgICAgICAgdmFyIF9zaG9wID0gd2ViRGF0YS5zaG9wZGF0YVt3ZWJEYXRhLm5vd0NpdHldLlNUT1JFU1t3ZWJEYXRhLm5vd0FyZWFdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiX3Nob3AuTEFUOlwiK19zaG9wLkxBVCtcIi9cIitcIl9zaG9wLkxORzpcIitfc2hvcC5MTkcpO1xyXG4gICAgICAgIHdlYkRhdGEubWFwT3B0aW9ucyA9IHt6b29tOiAxOCxjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoX3Nob3AuTEFULCBfc2hvcC5MTkcpfVxyXG4gICAgICAgIHdlYkRhdGEubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwQ2FudmFzJyksd2ViRGF0YS5tYXBPcHRpb25zKTsgXHJcbiAgICAgICAgdmFyIGJlYWNoTWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7cG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoX3Nob3AuTEFULCBfc2hvcC5MTkcpLG1hcDogd2ViRGF0YS5tYXAsaWNvbjogd2ViRGF0YS5tYXBpbWFnZX0pO1xyXG4gICAgICAgIHdlYkRhdGEubWFwLnNldENlbnRlcihuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKF9zaG9wLkxBVCwgX3Nob3AuTE5HKSk7XHJcbiAgICAgICAgLy8gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXJPbmNlKHdlYkRhdGEubWFwLCAnaWRsZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgIC8vbG9hZGVkIGZ1bGx5XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCd6enp6Jyk7XHJcbiAgICAgICAgLy8gICAgIHdlYkRhdGEubWFwLnNldENlbnRlcihuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKF9zaG9wLkxBVCwgX3Nob3AuTE5HKSk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB3aW5kb3dJbml0KCl7XHJcbiAgICAgICAgdmFyIF9yYW5kb20gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCkrMTtcclxuICAgICAgICAkKCcudXNlcl9jb2RlJykucGFyZW50KCkucHJlcGVuZCgnPGltZyBzcmM9XCInKyB3ZWJEYXRhLmJhY2tlbmR1cmwgKydhcGlfdmNvZGUuYXNoeD8nK19yYW5kb20rJ1wiIGNsYXNzPVwiY29kZVwiPicpO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHdlYkRhdGEuYmFja2VuZHVybCArICdhcGlfc3RvcmUuYXNoeCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5zaG9wZGF0YSA9IGRhdGEuREFUQTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHdlYkRhdGEuc2hvcGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5SUz09XCJPS1wiKXtcclxuICAgICAgICAgICAgICAgICAgICBpbml0TWFwKCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBjb25zb2xlLmxvZyhkYXRhLlJTKTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSxlcnJvcjogZnVuY3Rpb24oeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG4gICAgICAgICAgICAgICAgc2hvd0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvcjpcIiwgeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFkZHJDaGFuZ2UoKXtcclxuICAgIFx0dmFyIHZhbHVlID0gJC5hZGRyZXNzLnZhbHVlKCk7XHJcblx0XHRzd2l0Y2godmFsdWUpIHtcclxuXHRcdFx0Y2FzZSAnLyc6XHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcImluZGV4Lmh0bWwjL3BhZ2UxXCI7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTEnOlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfniZnpvabmgKXoqLrlrqQnKTtcclxuXHRcdFx0XHR3ZWJEYXRhLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5wYWdlMXNjZW5lcyA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTE/c2NlbmVzPTInOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+eJmem9pue3iuaApeaqouafpScpO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5ub3dwYWdlID0gMTtcclxuICAgICAgICAgICAgICAgIHdlYkRhdGEucGFnZTFzY2VuZXMgPSAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UxP3NjZW5lcz0zJzpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfoqLrmlrfntZDmnpwnKTtcclxuICAgICAgICAgICAgICAgIHdlYkRhdGEubm93cGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgICB3ZWJEYXRhLnBhZ2Uxc2NlbmVzID0gMztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdGNhc2UgJy9wYWdlMic6XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ+eJmem9puaxguiouumgiOefpScpO1xyXG5cdFx0XHRcdHdlYkRhdGEubm93cGFnZSA9IDI7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTMnOlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfnq4vljbPntKLlj5YnKTtcclxuXHRcdFx0XHR3ZWJEYXRhLm5vd3BhZ2UgPSAzO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5wYWdlM3NjZW5lcyA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTQnOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aVkeaVkeeJmem9plRWQycpO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5ub3dwYWdlID0gNDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblx0XHR9XHJcblx0XHRjaGFuZ2VQYWdlKCk7XHJcbiAgICB9XHJcbiAgXHRmdW5jdGlvbiBzaG93TG9hZGluZyhfdCl7XHJcbiAgXHRcdGlmKF90KSAkKCcubG9hZGluZycpLmZhZGVJbigpO1xyXG4gIFx0XHRlbHNlICQoJy5sb2FkaW5nJykuZmFkZU91dCgpO1xyXG4gIFx0fVxyXG59KS8vcmVhZHkgZW5kICBcclxuZnVuY3Rpb24gZ2V0VXJsVmFycygpe1xyXG4gICAgdmFyIHZhcnM9W10saGFzaDt2YXIgaGFzaGVzPXdpbmRvdy5sb2NhdGlvbi5ocmVmLnNsaWNlKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJz8nKSsxKS5zcGxpdCgnJicpO1xyXG4gICAgZm9yKHZhciBpPTA7aTxoYXNoZXMubGVuZ3RoO2krKyl7aGFzaD1oYXNoZXNbaV0uc3BsaXQoJz0nKTt2YXJzLnB1c2goaGFzaFswXSk7dmFyc1toYXNoWzBdXT1oYXNoWzFdfVxyXG4gICAgcmV0dXJuIHZhcnNcclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
