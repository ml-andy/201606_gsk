function getUrlVars(){for(var e,a=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)e=n[o].split("="),a.push(e[0]),a[e[0]]=e[1];return a}$(document).ready(function(){function e(){_()}function a(){device.mobile()?window.location.href="https://m.facebook.com/dialog/feed?app_id="+A+"&caption=&name="+x.sharetitle+"&description="+x.sharedes+"&link="+x.mainurl+"&redirect_uri="+x.mainurl:FB.ui({method:"feed",name:x.sharetitle,caption:"",description:x.sharedes,display:"popup",link:x.mainurl},function(e){e&&!e.error_code})}function n(){x.treecanvas=document.getElementById("tree"),images=images||{},ss=ss||{};var e=new createjs.LoadQueue(!1);e.addEventListener("fileload",o),e.addEventListener("complete",t),e.loadFile({src:"images/treeAni_atlas_.txt",type:"spritesheet",id:"treeAni_atlas_"},!0),e.loadManifest(lib.properties.manifest)}function o(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function t(e){var a=e.target;ss.treeAni_atlas_=a.getResult("treeAni_atlas_"),exportRoot=new lib.treeAni,x.stage=new createjs.Stage(x.treecanvas),x.stage.addChild(exportRoot),x.stage.update(),createjs.Ticker.setFPS(lib.properties.fps),createjs.Ticker.addEventListener("tick",s),x.treesmall=document.getElementById("treeSmall"),x.treesmallStage=new createjs.Stage(x.treesmall),x.treesmallStagemovie=x.treesmallStage.addChild(new lib.元件1_1),x.light=document.getElementById("light"),x.lightStage=new createjs.Stage(x.light),x.lightStagemovie=x.lightStage.addChild(new lib.元件1複製),x.lightStagemovie.setTransform(105,0),x.gobtn=document.getElementById("gobtn"),x.gobtnStage=new createjs.Stage(x.gobtn),x.gobtnStagemovie=x.gobtnStage.addChild(new lib.元件2_1),x.gobtnStagemovie.setTransform(0,0),x.HasComplet+=1,y()}function s(){x.stage.update(),x.treesmallStage&&x.treesmallStage.update(),x.lightStage&&x.lightStage.update(),x.gobtnStage&&x.gobtnStage.update(),x.nowscorepercent>x.treeBigFrame?x.treeBigFrame+=1:x.nowscorepercent<x.treeBigFrame&&(x.treeBigFrame-=1),exportRoot.instance_2.gotoAndStop(x.treeBigFrame),x.treesmallStagemovie.gotoAndStop(x.treeSmallFrame)}function r(){$.address.value("/page1?scenes=3"),$(".q1ans").removeClass("on"),$(".databox .bar .light").attr("style",""),$(".databox .bar .cover").attr("style",""),$(".databoxin").mCustomScrollbar("scrollTo",0)}function c(){$(".p3s1gobtn").addClass("on");var e=$(".user_data");return x.senddata={mob:e.find(".user_phone").val(),email:e.find(".user_mail").val(),name:e.find(".user_name").val(),storeid:x.shopdata[x.nowCity].STORES[x.nowArea].ID,ccc:e.find(".user_code").val()},x.senddata.mob&&x.senddata.email&&x.senddata.name&&x.senddata.ccc&&$(".agreebox .checkbox").hasClass("on")?void $.ajax({url:x.backendurl+"api_save.ashx",type:"POST",dataType:"json",data:x.senddata,success:function(e){"OK"==e.RS?(x.page3scenes=2,m()):alert(e.RS),$(".p3s1gobtn").removeClass("on")},error:function(e,a,n){$(".p3s1gobtn").removeClass("on"),console.log("error:",e,a,n)}}):($(".agreebox .checkbox").hasClass("on")?alert(x.creatUsererrortxt):alert("請同意個資條款"),void $(".p3s1gobtn").removeClass("on"))}function p(){function e(r){var i=Math.floor(r.pageX-a.offset().left-n.width()/2);return i>t?void a.unbind("mousemove",e):0>i?void a.unbind("mousemove",e):(n.css("left",i),o.css("width",i),o.width()<=s?x.dragscore=Math.round(o.width()/s*5):x.dragscore=5+Math.round((o.width()-s)/s*15),void l())}var a=$(this),n=$(this).find(".light"),o=$(this).find(".cover"),t=a.width()-10,s=t/2;n.mousedown(function(n){a.bind("mousemove",e)}),n.mouseout(function(n){a.unbind("mousemove",e)}),n.mouseup(function(n){a.unbind("mousemove",e)})}function l(){x.nowscore=0;for(var e=0;e<$(".q1ans").length;e++)$(".q1ans").eq(e).hasClass("on")&&(x.nowscore=x.nowscore+1*$(".q1ans").eq(e).attr("data-score"));x.nowscore=x.nowscore+x.dragscore,x.nowscorepercent=Math.round(x.nowscore/85*100)-1,console.log("webData.dragscore:"+x.dragscore+"/webData.nowscore:"+x.nowscore+"/webData.nowscorepercent:"+x.nowscorepercent),x.prescore=x.nowscore}function d(e){e.parent().parent().hasClass("multi")?e.hasClass("on")?e.removeClass("on"):e.addClass("on"):(e.parent().parent().find(".q1ans").removeClass("on"),e.addClass("on")),l()}function g(e){e?$(".menuDom").addClass("on"):$(".menuDom").removeClass("on")}function m(){var e="";1!=x.page3scenes?e=" scenes"+x.page3scenes:setTimeout(function(){v()},1500),$(".wrapperin .page3 .scenes_all").attr("class","scenes_all"+e),$(".scenes_all .scenes").removeClass("on"),$(".wrapperin .page3 .scenes_all .scenes").eq(x.page3scenes-1).addClass("on"),$(".wrapperin .page3 .scenes_all .scenes .content").hide(),x.page1hasplay?$(".wrapperin .page3 .scenes_all .scenes2 .btn1 a").hide().eq(1).show():$(".wrapperin .page3 .scenes_all .scenes2 .btn1 a").hide().eq(0).show(),x.pg3timeout&&clearTimeout(x.pg3timeout),x.pg3timeout=setTimeout(function(){$(".wrapperin .page3 .scenes_all .scenes").eq(x.page3scenes-1).find(".content").fadeIn()},1300)}function u(){var e="";1!=x.page1scenes&&(e=" scenes"+x.page1scenes),$(".wrapperin .page1 .scenes_all").attr("class","scenes_all"+e),$(".scenes_all .scenes").removeClass("on"),$(".wrapperin .page1 .scenes_all .scenes").eq(x.page1scenes-1).addClass("on"),2==x.page1scenes&&(x.nowscore=0,x.nowscorepercent=0,x.prescore=0,x.dragscore=0,x.treeBigFrame=0),3==x.page1scenes?(x.treeSmallFrame=0,w(!0)):w(!1)}function w(e){var a=$(".wrapperin .page1 .scenes_all .scenes3");e?(x.page1hasplay=!0,a.find(".score").html(0),x.nowscorepercent<=40?a.find(".s").hide().eq(0).show():x.nowscorepercent>40&&x.nowscorepercent<=80?a.find(".s").hide().eq(1).show():x.nowscorepercent>80&&a.find(".s").hide().eq(2).show(),a.find(".content").hide(),x.pg1S3timeout&&clearTimeout(x.pg1S3timeout),x.pg1S3timeout=setTimeout(function(){a.find(".content").fadeIn(300,function(){f()})},1300)):a.find(".content").fadeOut()}function f(){var e=$(".wrapperin .page1 .scenes_all .scenes3 .score"),a=e.text();a<x.nowscorepercent&&(a=1*a+1,x.treeSmallFrame=a,x.pg1S3timeout=setTimeout(function(){f()},33)),e.html(a)}function h(){2!=x.prepage&&4!=x.prepage&&2!=x.nowpage&&4!=x.nowpage||(2==x.nowpage||4==x.nowpage?(1!=x.prepage&&3!=x.prepage||x.wrp.find(".wrapperin").attr("class","wrapperin page"+x.prepage),$(".wrapper_top").find(".page").removeClass("on"),2!=x.prepage&&4!=x.prepage||$(".wrapper_top").find(".page").addClass("yes"),$(".wrapper_top").find(".page"+x.nowpage).addClass("on")):(x.wrp.find(".wrapperin").attr("class","wrapperin"),$(".wrapper_top").find(".page").removeClass("yes")),x.wrp.find(".wrapperin").addClass("off"),x.wrapperTimeout&&clearTimeout(x.wrapperTimeout),x.wrapperTimeout=setTimeout(function(){x.wrp.find(".wrapperin").removeClass("off")},x.pagespeed)),1!=x.nowpage&&3!=x.nowpage||$(".wrapper_top").find(".page").removeClass("on"),1==x.nowpage&&u(),2==x.nowpage&&($(".page2").find(".content").hide(),x.pg3timeout&&clearTimeout(x.pg3timeout),x.pg3timeout=setTimeout(function(){$(".page2").find(".content").fadeIn()},1300)),4==x.nowpage?($(".page4").find(".content").hide(),x.pg3timeout&&clearTimeout(x.pg3timeout),x.pg3timeout=setTimeout(function(){$(".page4").find(".content").fadeIn(),x.player.playVideo()},1300)):x.player&&x.player.pauseVideo(),3==x.nowpage?($(".footer .gobtn").fadeOut(),m()):$(".footer .gobtn").fadeIn(),x.wrp.attr("class","wrapper").addClass("page"+x.nowpage),x.prepage=x.nowpage}function b(){x.nowCity=0,$(".mapdata .city").html("");for(i in x.shopdata)$(".mapdata .city").append("<option>"+x.shopdata[i].city+"</option>");$(".mapdata .city").change(function(){x.nowCity=$(".mapdata .city option:selected").index(),v()}),$(".mapdata .area").change(function(){x.nowArea=$(".mapdata .area option:selected").index(),C()}),x.HasComplet+=1,y()}function v(){console.log("webData.nowCity:"+x.nowCity),x.nowArea=0,$(".mapdata .area").html("");for(i in x.shopdata[x.nowCity].STORES)$(".mapdata .area").append("<option>"+x.shopdata[x.nowCity].STORES[i].STORE+"</option>");C()}function C(){console.log("webData.nowArea:"+x.nowArea),$(".shop_addr").html(x.shopdata[x.nowCity].STORES[x.nowArea].ADDRESS);var e=x.shopdata[x.nowCity].STORES[x.nowArea];console.log("_shop.LAT:"+e.LAT+"/_shop.LNG:"+e.LNG),x.mapOptions={zoom:18,center:new google.maps.LatLng(e.LAT,e.LNG)},x.map=new google.maps.Map(document.getElementById("mapCanvas"),x.mapOptions);new google.maps.Marker({position:new google.maps.LatLng(e.LAT,e.LNG),map:x.map,icon:x.mapimage});x.map.setCenter(new google.maps.LatLng(e.LAT,e.LNG))}function S(e){x.player=new YT.Player("player",{height:"100%",width:"100%",videoId:e,playerVars:{controls:1,autoplay:!1,enablejsapi:"0",hd:"1",rel:"0",showinfo:"0",modestbranding:"1",cc_load_policy:"1",wmode:"transparent"}})}function _(){var e=Math.round(1e3*Math.random())+1;$(".user_code").parent().prepend('<img src="'+x.backendurl+"api_vcode.ashx?"+e+'" class="code">'),S("AoT4Q6NPjco"),$.ajax({url:x.backendurl+"api_store.ashx",type:"POST",dataType:"json",success:function(e){x.shopdata=e.DATA,"OK"==e.RS?b():console.log(e.RS)},error:function(e,a,n){k(!1),console.log("error:",e,a,n)}})}function y(){x.HasComplet>=2?k(!1):setTimeout(function(){y()},300)}function T(){var e=$.address.value();switch(e){case"/":window.location.href="index.html#/page1";break;case"/page1":console.log("牙齦急診室"),x.nowpage=1,x.page1scenes=1;break;case"/page1?scenes=2":console.log("牙齦緊急檢查"),x.nowpage=1,x.page1scenes=2;break;case"/page1?scenes=3":console.log("診斷結果"),x.nowpage=1,x.page1scenes=3;break;case"/page2":console.log("牙齦求診須知"),x.nowpage=2;break;case"/page3":console.log("立即索取"),x.nowpage=3,x.page3scenes=1;break;case"/page4":console.log("救救牙齦TVC"),x.nowpage=4;break;case"/page5":console.log("牙齦健康自救法"),x.nowpage=1}h()}function k(e){e?$(".loading").fadeIn():$(".loading").fadeOut()}var x={};x.wrp=$(".wrapper"),x.mainurl="http://2016parodontax.everydayhealth.com.tw/20160617/",x.backendurl="http://2016parodontax.everydayhealth.com.tw/xml/",x.mapimage="http://ml-andy.github.io/chinesechess/website/images/mapicon.png",x.creatUsererrortxt="請填寫完整資料",x.pagespeed=500,x.page1scenes=1,x.page3scenes=1,x.HasComplet=0,$(".databoxin").mCustomScrollbar({scrollInertia:300,scrollEasing:"linear"}),$(".page3 .scenes1 .content").mCustomScrollbar({scrollInertia:300,scrollEasing:"linear"}),$(".page2 .content").mCustomScrollbar({scrollInertia:300,scrollEasing:"linear"}),x.nowscore=0,x.nowscorepercent=0,x.prescore=0,x.dragscore=0,x.page1hasplay=!1,x.treeBigFrame=0,x.treeSmallFrame=0,n(),x.sharetitle="【搶救】我的牙齦急診室！",x.sharedes="刷牙流血問題，隱藏健康大警訊。立即線上診斷，馬上索取【牙周適-牙齦護理牙膏】搶救牙齦！";var A="1706959846220744";FB.init({appId:A,channelUrl:x.mainurl,status:!0,xfbml:!0,cookie:!0}),$(".fbshare_btn").click(function(){a()}),$(".fb_share_btn").click(function(){a()}),$(".agreebox .checkbox").click(function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on")}),$(".p3s1gobtn").click(function(){$(this).hasClass("on")||c()}),$(".sure_btn").click(function(){r()}),$(".databox .bar").each(p),$(".q1ans").click(function(){d($(this))}),$(".start_btn").click(function(){$.address.value("/page1?scenes=2")}),$(".gobtn").click(function(){$(".menubtn").hasClass("on")&&$(".menubtn").trigger("click")}),$(".menua").click(function(){$(".menubtn").trigger("click")}),$(".menubtn").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),g(!1)):($(this).addClass("on"),g(!0))}),$.address.change(T),$(window).load(e)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJnZXRVcmxWYXJzIiwiaGFzaCIsInZhcnMiLCJoYXNoZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzbGljZSIsImluZGV4T2YiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJwdXNoIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJ3aW5kb3dMb2FkIiwid2luZG93SW5pdCIsInNoYXJlZmIiLCJkZXZpY2UiLCJtb2JpbGUiLCJGQkFwcElkIiwid2ViRGF0YSIsInNoYXJldGl0bGUiLCJzaGFyZWRlcyIsIm1haW51cmwiLCJGQiIsInVpIiwibWV0aG9kIiwibmFtZSIsImNhcHRpb24iLCJkZXNjcmlwdGlvbiIsImRpc3BsYXkiLCJsaW5rIiwicmVzcG9uc2UiLCJlcnJvcl9jb2RlIiwiY2FudmFzSWluaXQiLCJ0cmVlY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbWFnZXMiLCJzcyIsImxvYWRlciIsImNyZWF0ZWpzIiwiTG9hZFF1ZXVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUZpbGVMb2FkIiwiaGFuZGxlQ29tcGxldGUiLCJsb2FkRmlsZSIsInNyYyIsInR5cGUiLCJpZCIsImxvYWRNYW5pZmVzdCIsImxpYiIsInByb3BlcnRpZXMiLCJtYW5pZmVzdCIsImV2dCIsIml0ZW0iLCJyZXN1bHQiLCJxdWV1ZSIsInRhcmdldCIsImdldFJlc3VsdCIsImV4cG9ydFJvb3QiLCJ0cmVlQW5pIiwic3RhZ2UiLCJTdGFnZSIsImFkZENoaWxkIiwidXBkYXRlIiwiVGlja2VyIiwic2V0RlBTIiwiZnBzIiwiU3RhZ2VMaXN0ZW50ZXIiLCJ0cmVlc21hbGwiLCJ0cmVlc21hbGxTdGFnZSIsInRyZWVzbWFsbFN0YWdlbW92aWUiLCLlhYPku7YxXzEiLCJsaWdodCIsImxpZ2h0U3RhZ2UiLCJsaWdodFN0YWdlbW92aWUiLCLlhYPku7Yx6KSH6KO9Iiwic2V0VHJhbnNmb3JtIiwiZ29idG4iLCJnb2J0blN0YWdlIiwiZ29idG5TdGFnZW1vdmllIiwi5YWD5Lu2Ml8xIiwiSGFzQ29tcGxldCIsImNoZWNrTG9hZGluZyIsIm5vd3Njb3JlcGVyY2VudCIsInRyZWVCaWdGcmFtZSIsImluc3RhbmNlXzIiLCJnb3RvQW5kU3RvcCIsInRyZWVTbWFsbEZyYW1lIiwicDFzMnN1cmUiLCJhZGRyZXNzIiwidmFsdWUiLCJyZW1vdmVDbGFzcyIsImF0dHIiLCJtQ3VzdG9tU2Nyb2xsYmFyIiwic2VuZERhdGEiLCJhZGRDbGFzcyIsIl91c2VyX2RhdGEiLCJzZW5kZGF0YSIsIm1vYiIsImZpbmQiLCJ2YWwiLCJlbWFpbCIsInN0b3JlaWQiLCJzaG9wZGF0YSIsIm5vd0NpdHkiLCJTVE9SRVMiLCJub3dBcmVhIiwiSUQiLCJjY2MiLCJoYXNDbGFzcyIsImFqYXgiLCJ1cmwiLCJiYWNrZW5kdXJsIiwiZGF0YVR5cGUiLCJkYXRhIiwic3VjY2VzcyIsIlJTIiwicGFnZTNzY2VuZXMiLCJjaGFuZ2VwYWdlM1NjZW5lcyIsImFsZXJ0IiwiZXJyb3IiLCJ4aHIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiY3JlYXRVc2VyZXJyb3J0eHQiLCJkYXRhYm94QmFyIiwiZHJhZ21vdmUiLCJlIiwibGZ0IiwiTWF0aCIsImZsb29yIiwicGFnZVgiLCJiYXIiLCJvZmZzZXQiLCJsZWZ0IiwiZHJhZyIsIndpZHRoIiwiX3dpZHRoIiwidW5iaW5kIiwiY3NzIiwiY292ZXIiLCJfd2lkdGg1MCIsImRyYWdzY29yZSIsInJvdW5kIiwiY291bnRTY29yZV90cnVlIiwidGhpcyIsIm1vdXNlZG93biIsImJpbmQiLCJtb3VzZW91dCIsIm1vdXNldXAiLCJub3dzY29yZSIsImVxIiwicHJlc2NvcmUiLCJjb3VudFNjb3JlIiwiX28iLCJwYXJlbnQiLCJzaG93bWVudSIsIl90IiwiX3RtcCIsInNldFRpbWVvdXQiLCJjaGFuZ2VDaXR5IiwiaGlkZSIsInBhZ2UxaGFzcGxheSIsInNob3ciLCJwZzN0aW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiZmFkZUluIiwiY2hhbmdlcGFnZTFTY2VuZXMiLCJwYWdlMXNjZW5lcyIsInBhZ2Uxc2VjZW5lczNhbmkiLCJfc2NlbmVzMyIsImh0bWwiLCJwZzFTM3RpbWVvdXQiLCJwYWdlMXNlY2VuZXMzU2NvcmVhbmkiLCJmYWRlT3V0IiwiX3Njb3JlIiwiX25vd251bWJlciIsInRleHQiLCJjaGFuZ2VQYWdlIiwicHJlcGFnZSIsIm5vd3BhZ2UiLCJ3cnAiLCJ3cmFwcGVyVGltZW91dCIsInBhZ2VzcGVlZCIsInBsYXllciIsInBsYXlWaWRlbyIsInBhdXNlVmlkZW8iLCJpbml0TWFwIiwiYXBwZW5kIiwiY2l0eSIsImNoYW5nZSIsImluZGV4IiwiY2hhbmdlQXJlYSIsIlNUT1JFIiwiQUREUkVTUyIsIl9zaG9wIiwiTEFUIiwiTE5HIiwibWFwT3B0aW9ucyIsInpvb20iLCJjZW50ZXIiLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwibWFwIiwiTWFwIiwiTWFya2VyIiwicG9zaXRpb24iLCJpY29uIiwibWFwaW1hZ2UiLCJzZXRDZW50ZXIiLCJjcmVhdGVWaWRlbyIsIl9pZCIsIllUIiwiUGxheWVyIiwiaGVpZ2h0IiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJjb250cm9scyIsImF1dG9wbGF5IiwiZW5hYmxlanNhcGkiLCJoZCIsInJlbCIsInNob3dpbmZvIiwibW9kZXN0YnJhbmRpbmciLCJjY19sb2FkX3BvbGljeSIsIndtb2RlIiwiX3JhbmRvbSIsInJhbmRvbSIsInByZXBlbmQiLCJEQVRBIiwic2hvd0xvYWRpbmciLCJhZGRyQ2hhbmdlIiwic2Nyb2xsSW5lcnRpYSIsInNjcm9sbEVhc2luZyIsImluaXQiLCJhcHBJZCIsImNoYW5uZWxVcmwiLCJzdGF0dXMiLCJ4ZmJtbCIsImNvb2tpZSIsImNsaWNrIiwiZWFjaCIsInRyaWdnZXIiLCJsb2FkIl0sIm1hcHBpbmdzIjoiQUEwZEEsUUFBU0EsY0FFTCxJQUFJLEdBRFFDLEdBQVJDLEtBQWlCQyxFQUFPQyxPQUFPQyxTQUFTQyxLQUFL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TCxFQUFFLHVCQUF1QnlPLE1BQU0sV0FBY3pPLEVBQUV5SSxNQUFNdEMsU0FBUyxNQUFPbkcsRUFBRXlJLE1BQU14RCxZQUFZLE1BQVlqRixFQUFFeUksTUFBTXBELFNBQVMsUUFDdEhyRixFQUFFLGNBQWN5TyxNQUFNLFdBQWV6TyxFQUFFeUksTUFBTXRDLFNBQVMsT0FBT2YsTUFDN0RwRixFQUFFLGFBQWF5TyxNQUFNLFdBQVczSixNQUNoQzlFLEVBQUUsaUJBQWlCME8sS0FBS3JILEdBQ3hCckgsRUFBRSxVQUFVeU8sTUFBTSxXQUFXeEYsRUFBV2pKLEVBQUV5SSxTQUMxQ3pJLEVBQUUsY0FBY3lPLE1BQU0sV0FBV3pPLEVBQUUrRSxRQUFRQyxNQUFNLHFCQUNqRGhGLEVBQUUsVUFBVXlPLE1BQU0sV0FBY3pPLEVBQUUsWUFBWW1HLFNBQVMsT0FBT25HLEVBQUUsWUFBWTJPLFFBQVEsV0FDcEYzTyxFQUFFLFVBQVV5TyxNQUFNLFdBQVd6TyxFQUFFLFlBQVkyTyxRQUFRLFdBQ3REM08sRUFBRSxZQUFZeU8sTUFBTSxXQUNoQnpPLEVBQUV5SSxNQUFNdEMsU0FBUyxPQUFPbkcsRUFBRXlJLE1BQU14RCxZQUFZLE1BQU1tRSxHQUFTLEtBQ3hEcEosRUFBRXlJLE1BQU1wRCxTQUFTLE1BQU8rRCxHQUFTLE1BRXJDcEosRUFBRStFLFFBQVF1RyxPQUFPMEMsR0FDcEJoTyxFQUFFVCxRQUFRcVAsS0FBS3pPIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblx0dmFyIHdlYkRhdGEgPXt9O1x0XHJcblxyXG5cdC8vSW5pdFxyXG5cdHdlYkRhdGEud3JwPSQoJy53cmFwcGVyJyk7XHJcbiAgICB3ZWJEYXRhLm1haW51cmwgPSAnaHR0cDovLzIwMTZwYXJvZG9udGF4LmV2ZXJ5ZGF5aGVhbHRoLmNvbS50dy8yMDE2MDYxNy8nO1xyXG4gICAgd2ViRGF0YS5iYWNrZW5kdXJsID0gJ2h0dHA6Ly8yMDE2cGFyb2RvbnRheC5ldmVyeWRheWhlYWx0aC5jb20udHcveG1sLyc7XHJcbiAgICB3ZWJEYXRhLm1hcGltYWdlID0gJ2h0dHA6Ly9tbC1hbmR5LmdpdGh1Yi5pby9jaGluZXNlY2hlc3Mvd2Vic2l0ZS9pbWFnZXMvbWFwaWNvbi5wbmcnO1xyXG4gICAgd2ViRGF0YS5jcmVhdFVzZXJlcnJvcnR4dCA9IFwi6KuL5aGr5a+r5a6M5pW06LOH5paZXCI7XHJcblx0d2ViRGF0YS5wYWdlc3BlZWQgPSA1MDA7XHJcbiAgICB3ZWJEYXRhLnBhZ2Uxc2NlbmVzID0gMTtcclxuICAgIHdlYkRhdGEucGFnZTNzY2VuZXMgPSAxO1xyXG4gICAgd2ViRGF0YS5IYXNDb21wbGV0ID0gMDtcclxuICAgICQoXCIuZGF0YWJveGluXCIpLm1DdXN0b21TY3JvbGxiYXIoe3Njcm9sbEluZXJ0aWE6MzAwLHNjcm9sbEVhc2luZzonbGluZWFyJ30pO1xyXG4gICAgJChcIi5wYWdlMyAuc2NlbmVzMSAuY29udGVudFwiKS5tQ3VzdG9tU2Nyb2xsYmFyKHtzY3JvbGxJbmVydGlhOjMwMCxzY3JvbGxFYXNpbmc6J2xpbmVhcid9KTtcclxuICAgICQoXCIucGFnZTIgLmNvbnRlbnRcIikubUN1c3RvbVNjcm9sbGJhcih7c2Nyb2xsSW5lcnRpYTozMDAsc2Nyb2xsRWFzaW5nOidsaW5lYXInfSk7ICAgIFxyXG5cclxuICAgIC8vU0NPUkUgSU5JVFxyXG4gICAgd2ViRGF0YS5ub3dzY29yZSA9IDA7XHJcbiAgICB3ZWJEYXRhLm5vd3Njb3JlcGVyY2VudCA9IDA7XHJcbiAgICB3ZWJEYXRhLnByZXNjb3JlID0gMDtcclxuICAgIHdlYkRhdGEuZHJhZ3Njb3JlID0gMDtcclxuICAgIHdlYkRhdGEucGFnZTFoYXNwbGF5ID0gZmFsc2U7XHJcblxyXG4gICAgLy9DYW52YXMgaW5pdFxyXG4gICAgd2ViRGF0YS50cmVlQmlnRnJhbWUgPSAwO1xyXG4gICAgd2ViRGF0YS50cmVlU21hbGxGcmFtZSA9IDA7XHJcblxyXG4gICAgY2FudmFzSWluaXQoKTtcclxuICAgIC8vRkIgSU5JVFxyXG4gICAgd2ViRGF0YS5zaGFyZXRpdGxlID0gJ+OAkOaQtuaVkeOAkeaIkeeahOeJmem9puaApeiouuWupO+8gSc7XHJcbiAgICB3ZWJEYXRhLnNoYXJlZGVzID0gJ+WIt+eJmea1geihgOWVj+mhjO+8jOmaseiXj+WBpeW6t+Wkp+itpuioiuOAgueri+WNs+e3muS4iuiouuaWt++8jOmmrOS4iue0ouWPluOAkOeJmeWRqOmBqS3niZnpvaborbfnkIbniZnoho/jgJHmkLbmlZHniZnpvabvvIEnO1xyXG4gICAgdmFyIEZCQXBwSWQgPSAnMTcwNjk1OTg0NjIyMDc0NCc7XHJcbiAgICBGQi5pbml0KHtcclxuICAgICAgYXBwSWQgICAgICA6IEZCQXBwSWQsXHJcbiAgICAgIGNoYW5uZWxVcmwgOiB3ZWJEYXRhLm1haW51cmwsXHJcbiAgICAgIHN0YXR1cyAgICAgOiB0cnVlLFxyXG4gICAgICB4ZmJtbCAgICAgIDogdHJ1ZSxcclxuICAgICAgY29va2llICAgICA6IHRydWVcclxuICAgIH0pO1xyXG5cclxuXHJcblx0Ly9BZGRMaXN0ZW5lclxyXG4gICAgJCgnLmZic2hhcmVfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzaGFyZWZiKCk7fSk7XHJcbiAgICAkKCcuZmJfc2hhcmVfYnRuJykuY2xpY2soZnVuY3Rpb24oKXtzaGFyZWZiKCk7fSk7XHJcbiAgICAkKCcuYWdyZWVib3ggLmNoZWNrYm94JykuY2xpY2soZnVuY3Rpb24oKXtpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXskKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO31lbHNleyQodGhpcykuYWRkQ2xhc3MoJ29uJyk7fX0pO1xyXG4gICAgJCgnLnAzczFnb2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7aWYoISQodGhpcykuaGFzQ2xhc3MoJ29uJykpIHNlbmREYXRhKCk7fSk7XHJcbiAgICAkKCcuc3VyZV9idG4nKS5jbGljayhmdW5jdGlvbigpe3AxczJzdXJlKCk7fSk7XHJcbiAgICAkKCcuZGF0YWJveCAuYmFyJykuZWFjaChkYXRhYm94QmFyKTtcclxuICAgICQoJy5xMWFucycpLmNsaWNrKGZ1bmN0aW9uKCl7Y291bnRTY29yZSgkKHRoaXMpKTt9KTtcclxuICAgICQoJy5zdGFydF9idG4nKS5jbGljayhmdW5jdGlvbigpeyQuYWRkcmVzcy52YWx1ZShcIi9wYWdlMT9zY2VuZXM9MlwiKTt9KTtcclxuICAgICQoJy5nb2J0bicpLmNsaWNrKGZ1bmN0aW9uKCl7aWYoJCgnLm1lbnVidG4nKS5oYXNDbGFzcygnb24nKSkgJCgnLm1lbnVidG4nKS50cmlnZ2VyKCdjbGljaycpO30pO1xyXG4gICAgJCgnLm1lbnVhJykuY2xpY2soZnVuY3Rpb24oKXskKCcubWVudWJ0bicpLnRyaWdnZXIoJ2NsaWNrJyk7fSk7XHRcclxuXHQkKCcubWVudWJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvbicpKXskKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO3Nob3dtZW51KGZhbHNlKTt9XHJcblx0XHRlbHNlIHskKHRoaXMpLmFkZENsYXNzKCdvbicpOyBzaG93bWVudSh0cnVlKTt9XHJcblx0fSk7XHJcbiAgICAkLmFkZHJlc3MuY2hhbmdlKGFkZHJDaGFuZ2UpO1xyXG5cdCQod2luZG93KS5sb2FkKHdpbmRvd0xvYWQpO1xyXG5cdGZ1bmN0aW9uIHdpbmRvd0xvYWQoKXtcclxuICAgICAgICB3aW5kb3dJbml0KCk7XHJcblx0fVxyXG4gICAgXHJcblxyXG5cclxuICAgIC8vRWV2ZW50XHJcbiAgICBmdW5jdGlvbiBzaGFyZWZiKCl7XHJcbiAgICAgICAgaWYoZGV2aWNlLm1vYmlsZSgpKXtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9J2h0dHBzOi8vbS5mYWNlYm9vay5jb20vZGlhbG9nL2ZlZWQ/YXBwX2lkPScrIEZCQXBwSWQgKycmY2FwdGlvbj0mbmFtZT0nK3dlYkRhdGEuc2hhcmV0aXRsZSsnJmRlc2NyaXB0aW9uPScrd2ViRGF0YS5zaGFyZWRlcysnJmxpbms9Jysgd2ViRGF0YS5tYWludXJsICsnJnJlZGlyZWN0X3VyaT0nK3dlYkRhdGEubWFpbnVybDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgRkIudWkoeyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ2ZlZWQnLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogd2ViRGF0YS5zaGFyZXRpdGxlLFxyXG4gICAgICAgICAgICAgICAgY2FwdGlvbjogXCJcIixcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB3ZWJEYXRhLnNoYXJlZGVzLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheTpcInBvcHVwXCIsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiB3ZWJEYXRhLm1haW51cmxcclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmICFyZXNwb25zZS5lcnJvcl9jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NoYXJlIG9rJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzaGFyZSBub3Qgb2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2FudmFzSWluaXQoKXtcclxuICAgICAgICB3ZWJEYXRhLnRyZWVjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyZWVcIik7XHJcbiAgICAgICAgaW1hZ2VzID0gaW1hZ2VzfHx7fTtcclxuICAgICAgICBzcyA9IHNzfHx7fTtcclxuICAgICAgICB2YXIgbG9hZGVyID0gbmV3IGNyZWF0ZWpzLkxvYWRRdWV1ZShmYWxzZSk7XHJcbiAgICAgICAgbG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJmaWxlbG9hZFwiLCBoYW5kbGVGaWxlTG9hZCk7XHJcbiAgICAgICAgbG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjb21wbGV0ZVwiLCBoYW5kbGVDb21wbGV0ZSk7XHJcbiAgICAgICAgbG9hZGVyLmxvYWRGaWxlKHtzcmM6XCJpbWFnZXMvdHJlZUFuaV9hdGxhc18udHh0XCIsIHR5cGU6XCJzcHJpdGVzaGVldFwiLCBpZDpcInRyZWVBbmlfYXRsYXNfXCJ9LCB0cnVlKTtcclxuICAgICAgICBsb2FkZXIubG9hZE1hbmlmZXN0KGxpYi5wcm9wZXJ0aWVzLm1hbmlmZXN0KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUZpbGVMb2FkKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQuaXRlbS50eXBlID09IFwiaW1hZ2VcIikgeyBpbWFnZXNbZXZ0Lml0ZW0uaWRdID0gZXZ0LnJlc3VsdDsgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaGFuZGxlQ29tcGxldGUoZXZ0KSB7XHJcbiAgICAgICAgdmFyIHF1ZXVlID0gZXZ0LnRhcmdldDtcclxuICAgICAgICBzc1tcInRyZWVBbmlfYXRsYXNfXCJdID0gcXVldWUuZ2V0UmVzdWx0KFwidHJlZUFuaV9hdGxhc19cIik7XHJcbiAgICAgICAgZXhwb3J0Um9vdCA9IG5ldyBsaWIudHJlZUFuaSgpO1xyXG5cclxuICAgICAgICB3ZWJEYXRhLnN0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKHdlYkRhdGEudHJlZWNhbnZhcyk7XHJcbiAgICAgICAgd2ViRGF0YS5zdGFnZS5hZGRDaGlsZChleHBvcnRSb290KTtcclxuICAgICAgICB3ZWJEYXRhLnN0YWdlLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICBjcmVhdGVqcy5UaWNrZXIuc2V0RlBTKGxpYi5wcm9wZXJ0aWVzLmZwcyk7XHJcbiAgICAgICAgY3JlYXRlanMuVGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aWNrXCIsIFN0YWdlTGlzdGVudGVyKTtcclxuXHJcbiAgICAgICAgLy9zbWFsbFRyZWVcclxuICAgICAgICB3ZWJEYXRhLnRyZWVzbWFsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJlZVNtYWxsXCIpOyBcclxuICAgICAgICB3ZWJEYXRhLnRyZWVzbWFsbFN0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKHdlYkRhdGEudHJlZXNtYWxsKTtcclxuICAgICAgICB3ZWJEYXRhLnRyZWVzbWFsbFN0YWdlbW92aWUgPSB3ZWJEYXRhLnRyZWVzbWFsbFN0YWdlLmFkZENoaWxkKG5ldyBsaWIu5YWD5Lu2MV8xKCkpO1xyXG5cclxuICAgICAgICAvL2xpZ2h0ICAgICAgICBcclxuICAgICAgICB3ZWJEYXRhLmxpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaWdodFwiKTsgXHJcbiAgICAgICAgd2ViRGF0YS5saWdodFN0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKHdlYkRhdGEubGlnaHQpO1xyXG4gICAgICAgIHdlYkRhdGEubGlnaHRTdGFnZW1vdmllID0gd2ViRGF0YS5saWdodFN0YWdlLmFkZENoaWxkKG5ldyBsaWIu5YWD5Lu2Meikh+ijvSgpKTtcclxuICAgICAgICB3ZWJEYXRhLmxpZ2h0U3RhZ2Vtb3ZpZS5zZXRUcmFuc2Zvcm0oMTA1LDApO1xyXG5cclxuICAgICAgICAvL2dvYnRuICAgICAgICBcclxuICAgICAgICB3ZWJEYXRhLmdvYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnb2J0blwiKTsgXHJcbiAgICAgICAgd2ViRGF0YS5nb2J0blN0YWdlID0gbmV3IGNyZWF0ZWpzLlN0YWdlKHdlYkRhdGEuZ29idG4pO1xyXG4gICAgICAgIHdlYkRhdGEuZ29idG5TdGFnZW1vdmllID0gd2ViRGF0YS5nb2J0blN0YWdlLmFkZENoaWxkKG5ldyBsaWIu5YWD5Lu2Ml8xKCkpO1xyXG4gICAgICAgIHdlYkRhdGEuZ29idG5TdGFnZW1vdmllLnNldFRyYW5zZm9ybSgwLDApO1xyXG5cclxuICAgICAgICB3ZWJEYXRhLkhhc0NvbXBsZXQgKz0gMTtcclxuICAgICAgICBjaGVja0xvYWRpbmcoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIFN0YWdlTGlzdGVudGVyKCl7XHJcbiAgICAgICAgd2ViRGF0YS5zdGFnZS51cGRhdGUoKTtcclxuICAgICAgICBpZih3ZWJEYXRhLnRyZWVzbWFsbFN0YWdlKSB3ZWJEYXRhLnRyZWVzbWFsbFN0YWdlLnVwZGF0ZSgpO1xyXG4gICAgICAgIGlmKHdlYkRhdGEubGlnaHRTdGFnZSkgd2ViRGF0YS5saWdodFN0YWdlLnVwZGF0ZSgpO1xyXG4gICAgICAgIGlmKHdlYkRhdGEuZ29idG5TdGFnZSkgd2ViRGF0YS5nb2J0blN0YWdlLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICBpZih3ZWJEYXRhLm5vd3Njb3JlcGVyY2VudCA+IHdlYkRhdGEudHJlZUJpZ0ZyYW1lKSB3ZWJEYXRhLnRyZWVCaWdGcmFtZSs9MTtcclxuICAgICAgICBlbHNlIGlmKHdlYkRhdGEubm93c2NvcmVwZXJjZW50IDwgd2ViRGF0YS50cmVlQmlnRnJhbWUpIHdlYkRhdGEudHJlZUJpZ0ZyYW1lLT0xOyAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwb3J0Um9vdC5pbnN0YW5jZV8yLmdvdG9BbmRTdG9wKHdlYkRhdGEudHJlZUJpZ0ZyYW1lKTtcclxuICAgICAgICB3ZWJEYXRhLnRyZWVzbWFsbFN0YWdlbW92aWUuZ290b0FuZFN0b3Aod2ViRGF0YS50cmVlU21hbGxGcmFtZSk7XHJcbiAgICB9ICAgXHJcbiAgICBmdW5jdGlvbiBwMXMyc3VyZSgpe1xyXG4gICAgICAgICQuYWRkcmVzcy52YWx1ZShcIi9wYWdlMT9zY2VuZXM9M1wiKTtcclxuICAgICAgICAkKCcucTFhbnMnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAkKCcuZGF0YWJveCAuYmFyIC5saWdodCcpLmF0dHIoJ3N0eWxlJywnJyk7XHJcbiAgICAgICAgJCgnLmRhdGFib3ggLmJhciAuY292ZXInKS5hdHRyKCdzdHlsZScsJycpO1xyXG4gICAgICAgICQoJy5kYXRhYm94aW4nKS5tQ3VzdG9tU2Nyb2xsYmFyKCdzY3JvbGxUbycsMCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZW5kRGF0YSgpe1xyXG4gICAgICAgICQoJy5wM3MxZ29idG4nKS5hZGRDbGFzcygnb24nKTtcclxuICAgICAgICB2YXIgX3VzZXJfZGF0YSA9ICQoJy51c2VyX2RhdGEnKTtcclxuICAgICAgICB3ZWJEYXRhLnNlbmRkYXRhID0ge1xyXG4gICAgICAgICAgICBtb2I6X3VzZXJfZGF0YS5maW5kKCcudXNlcl9waG9uZScpLnZhbCgpLFxyXG4gICAgICAgICAgICBlbWFpbDpfdXNlcl9kYXRhLmZpbmQoJy51c2VyX21haWwnKS52YWwoKSxcclxuICAgICAgICAgICAgbmFtZTpfdXNlcl9kYXRhLmZpbmQoJy51c2VyX25hbWUnKS52YWwoKSxcclxuICAgICAgICAgICAgc3RvcmVpZDp3ZWJEYXRhLnNob3BkYXRhW3dlYkRhdGEubm93Q2l0eV0uU1RPUkVTW3dlYkRhdGEubm93QXJlYV0uSUQsXHJcbiAgICAgICAgICAgIGNjYzpfdXNlcl9kYXRhLmZpbmQoJy51c2VyX2NvZGUnKS52YWwoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighd2ViRGF0YS5zZW5kZGF0YS5tb2IgfHwgIXdlYkRhdGEuc2VuZGRhdGEuZW1haWwgfHwgIXdlYkRhdGEuc2VuZGRhdGEubmFtZSB8fCAhd2ViRGF0YS5zZW5kZGF0YS5jY2MgfHwgISQoJy5hZ3JlZWJveCAuY2hlY2tib3gnKS5oYXNDbGFzcygnb24nKSl7XHJcbiAgICAgICAgICAgIGlmKCEkKCcuYWdyZWVib3ggLmNoZWNrYm94JykuaGFzQ2xhc3MoJ29uJykpIGFsZXJ0KFwi6KuL5ZCM5oSP5YCL6LOH5qKd5qy+XCIpO1xyXG4gICAgICAgICAgICBlbHNlIGFsZXJ0KHdlYkRhdGEuY3JlYXRVc2VyZXJyb3J0eHQpOyAgICAgICAgICBcclxuICAgICAgICAgICAgJCgnLnAzczFnb2J0bicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogd2ViRGF0YS5iYWNrZW5kdXJsICsgJ2FwaV9zYXZlLmFzaHgnLFxyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6d2ViRGF0YS5zZW5kZGF0YSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5SUz09XCJPS1wiKXtcclxuICAgICAgICAgICAgICAgICAgICB3ZWJEYXRhLnBhZ2Uzc2NlbmVzPTI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcGFnZTNTY2VuZXMoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGFsZXJ0KGRhdGEuUlMpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnAzczFnb2J0bicpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgICAgICAgICB9LGVycm9yOiBmdW5jdGlvbih4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucDNzMWdvYnRuJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOlwiLCB4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZGF0YWJveEJhcigpe1xyXG4gICAgICAgIHZhciBiYXIgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICBkcmFnID0gJCh0aGlzKS5maW5kKCcubGlnaHQnKSxcclxuICAgICAgICAgICAgY292ZXIgPSAkKHRoaXMpLmZpbmQoJy5jb3ZlcicpLFxyXG4gICAgICAgICAgICBfd2lkdGggPSBiYXIud2lkdGgoKSAtIDEwLFxyXG4gICAgICAgICAgICBfd2lkdGg1MCA9IF93aWR0aCAvIDI7XHJcbiAgICAgICAgZHJhZy5tb3VzZWRvd24oZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGJhci5iaW5kKCdtb3VzZW1vdmUnLCBkcmFnbW92ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJhZy5tb3VzZW91dChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgYmFyLnVuYmluZCgnbW91c2Vtb3ZlJywgZHJhZ21vdmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRyYWcubW91c2V1cChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgYmFyLnVuYmluZCgnbW91c2Vtb3ZlJywgZHJhZ21vdmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZ1bmN0aW9uIGRyYWdtb3ZlKGUpe1xyXG4gICAgICAgICAgICB2YXIgbGZ0ID0gTWF0aC5mbG9vcihlLnBhZ2VYLWJhci5vZmZzZXQoKS5sZWZ0IC0gKGRyYWcud2lkdGgoKSAvIDIpKTtcclxuICAgICAgICAgICAgaWYobGZ0Pl93aWR0aCl7XHJcbiAgICAgICAgICAgICAgICBiYXIudW5iaW5kKCdtb3VzZW1vdmUnLCBkcmFnbW92ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGxmdDwwKXtcclxuICAgICAgICAgICAgICAgIGJhci51bmJpbmQoJ21vdXNlbW92ZScsIGRyYWdtb3ZlKTtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRyYWcuY3NzKCdsZWZ0JyxsZnQpO1xyXG4gICAgICAgICAgICBjb3Zlci5jc3MoJ3dpZHRoJyxsZnQpO1xyXG4gICAgICAgICAgICBpZihjb3Zlci53aWR0aCgpIDw9IF93aWR0aDUwKSB3ZWJEYXRhLmRyYWdzY29yZSA9IE1hdGgucm91bmQoY292ZXIud2lkdGgoKSAvIF93aWR0aDUwICogNSk7XHJcbiAgICAgICAgICAgIGVsc2Ugd2ViRGF0YS5kcmFnc2NvcmUgPSA1ICsgTWF0aC5yb3VuZCgoY292ZXIud2lkdGgoKS1fd2lkdGg1MCkgLyBfd2lkdGg1MCAqIDE1KTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgY291bnRTY29yZV90cnVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY291bnRTY29yZV90cnVlKCl7XHJcbiAgICAgICAgd2ViRGF0YS5ub3dzY29yZSA9IDA7XHJcbiAgICAgICAgLy9pdGVtXHJcbiAgICAgICAgZm9yKHZhciBpPTA7aTwkKCcucTFhbnMnKS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgaWYoJCgnLnExYW5zJykuZXEoaSkuaGFzQ2xhc3MoJ29uJykpIHdlYkRhdGEubm93c2NvcmUgPSB3ZWJEYXRhLm5vd3Njb3JlICsgJCgnLnExYW5zJykuZXEoaSkuYXR0cignZGF0YS1zY29yZScpKjE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZHJhZ1xyXG4gICAgICAgIHdlYkRhdGEubm93c2NvcmUgPSB3ZWJEYXRhLm5vd3Njb3JlICsgd2ViRGF0YS5kcmFnc2NvcmU7XHJcbiAgICAgICAgd2ViRGF0YS5ub3dzY29yZXBlcmNlbnQgPSBNYXRoLnJvdW5kKHdlYkRhdGEubm93c2NvcmUgLyA4NSAgKiAxMDApIC0gMTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIndlYkRhdGEuZHJhZ3Njb3JlOlwiICsgd2ViRGF0YS5kcmFnc2NvcmUgKyBcIi9cIiArIFwid2ViRGF0YS5ub3dzY29yZTpcIit3ZWJEYXRhLm5vd3Njb3JlICsgXCIvXCIgKyBcIndlYkRhdGEubm93c2NvcmVwZXJjZW50OlwiICt3ZWJEYXRhLm5vd3Njb3JlcGVyY2VudCk7XHJcbiAgICAgICAgd2ViRGF0YS5wcmVzY29yZSA9IHdlYkRhdGEubm93c2NvcmU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjb3VudFNjb3JlKF9vKXtcclxuICAgICAgICBpZihfby5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnbXVsdGknKSl7XHJcbiAgICAgICAgICAgIC8vbXVsdGlwbGUgXHJcbiAgICAgICAgICAgIGlmKF9vLmhhc0NsYXNzKCdvbicpKSBfby5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICAgICAgZWxzZSBfby5hZGRDbGFzcygnb24nKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9zaW5nbGVcclxuICAgICAgICAgICAgX28ucGFyZW50KCkucGFyZW50KCkuZmluZCgnLnExYW5zJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgIF9vLmFkZENsYXNzKCdvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3VudFNjb3JlX3RydWUoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNob3dtZW51KF90KXtcclxuICAgIFx0aWYoX3Qpe1xyXG4gICAgXHRcdCQoJy5tZW51RG9tJykuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICBcdH1lbHNle1xyXG4gICAgXHRcdCQoJy5tZW51RG9tJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICBcdH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoYW5nZXBhZ2UzU2NlbmVzKCl7XHJcbiAgICAgICAgdmFyIF90bXAgPSAnJzsgICAgICAgIFxyXG4gICAgICAgIGlmKHdlYkRhdGEucGFnZTNzY2VuZXMhPTEpIF90bXAgPSAnIHNjZW5lcycgKyB3ZWJEYXRhLnBhZ2Uzc2NlbmVzO1xyXG4gICAgICAgIGVsc2V7c2V0VGltZW91dChmdW5jdGlvbigpe2NoYW5nZUNpdHkoKTt9LDE1MDApO31cclxuICAgICAgICAkKCcud3JhcHBlcmluIC5wYWdlMyAuc2NlbmVzX2FsbCcpLmF0dHIoJ2NsYXNzJywnc2NlbmVzX2FsbCcgKyBfdG1wKTtcclxuICAgICAgICAkKCcuc2NlbmVzX2FsbCAuc2NlbmVzJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgJCgnLndyYXBwZXJpbiAucGFnZTMgLnNjZW5lc19hbGwgLnNjZW5lcycpLmVxKHdlYkRhdGEucGFnZTNzY2VuZXMtMSkuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgJCgnLndyYXBwZXJpbiAucGFnZTMgLnNjZW5lc19hbGwgLnNjZW5lcyAuY29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICBpZih3ZWJEYXRhLnBhZ2UxaGFzcGxheSkgJCgnLndyYXBwZXJpbiAucGFnZTMgLnNjZW5lc19hbGwgLnNjZW5lczIgLmJ0bjEgYScpLmhpZGUoKS5lcSgxKS5zaG93KCk7XHJcbiAgICAgICAgZWxzZSAkKCcud3JhcHBlcmluIC5wYWdlMyAuc2NlbmVzX2FsbCAuc2NlbmVzMiAuYnRuMSBhJykuaGlkZSgpLmVxKDApLnNob3coKTtcclxuICAgICAgICBpZih3ZWJEYXRhLnBnM3RpbWVvdXQpIGNsZWFyVGltZW91dCh3ZWJEYXRhLnBnM3RpbWVvdXQpO1xyXG4gICAgICAgIHdlYkRhdGEucGczdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLndyYXBwZXJpbiAucGFnZTMgLnNjZW5lc19hbGwgLnNjZW5lcycpLmVxKHdlYkRhdGEucGFnZTNzY2VuZXMtMSkuZmluZCgnLmNvbnRlbnQnKS5mYWRlSW4oKTtcclxuICAgICAgICB9LDEzMDApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlcGFnZTFTY2VuZXMoKXtcclxuICAgICAgICB2YXIgX3RtcCA9ICcnOyAgICAgICAgXHJcbiAgICAgICAgaWYod2ViRGF0YS5wYWdlMXNjZW5lcyE9MSkgX3RtcCA9ICcgc2NlbmVzJyArIHdlYkRhdGEucGFnZTFzY2VuZXM7XHJcbiAgICAgICAgJCgnLndyYXBwZXJpbiAucGFnZTEgLnNjZW5lc19hbGwnKS5hdHRyKCdjbGFzcycsJ3NjZW5lc19hbGwnICsgX3RtcCk7XHJcbiAgICAgICAgJCgnLnNjZW5lc19hbGwgLnNjZW5lcycpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgICAgICQoJy53cmFwcGVyaW4gLnBhZ2UxIC5zY2VuZXNfYWxsIC5zY2VuZXMnKS5lcSh3ZWJEYXRhLnBhZ2Uxc2NlbmVzLTEpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgICAgIGlmKHdlYkRhdGEucGFnZTFzY2VuZXM9PTIpe1xyXG4gICAgICAgICAgICB3ZWJEYXRhLm5vd3Njb3JlID0gMDtcclxuICAgICAgICAgICAgd2ViRGF0YS5ub3dzY29yZXBlcmNlbnQgPSAwO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLnByZXNjb3JlID0gMDtcclxuICAgICAgICAgICAgd2ViRGF0YS5kcmFnc2NvcmUgPSAwO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLnRyZWVCaWdGcmFtZSA9IDA7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHdlYkRhdGEucGFnZTFzY2VuZXM9PTMpe1xyXG4gICAgICAgICAgICB3ZWJEYXRhLnRyZWVTbWFsbEZyYW1lID0gMDtcclxuICAgICAgICAgICAgcGFnZTFzZWNlbmVzM2FuaSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBwYWdlMXNlY2VuZXMzYW5pKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhZ2Uxc2VjZW5lczNhbmkoX3Qpe1xyXG4gICAgICAgIHZhciBfc2NlbmVzMyA9ICQoJy53cmFwcGVyaW4gLnBhZ2UxIC5zY2VuZXNfYWxsIC5zY2VuZXMzJyk7ICAgICAgICBcclxuICAgICAgICBpZihfdCl7XHJcbiAgICAgICAgICAgIHdlYkRhdGEucGFnZTFoYXNwbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3NjZW5lczMuZmluZCgnLnNjb3JlJykuaHRtbCgwKTtcclxuICAgICAgICAgICAgaWYod2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ8PTQwKSBfc2NlbmVzMy5maW5kKCcucycpLmhpZGUoKS5lcSgwKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYod2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ+NDAgJiYgd2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ8PTgwKSBfc2NlbmVzMy5maW5kKCcucycpLmhpZGUoKS5lcSgxKS5zaG93KCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYod2ViRGF0YS5ub3dzY29yZXBlcmNlbnQ+ODApIF9zY2VuZXMzLmZpbmQoJy5zJykuaGlkZSgpLmVxKDIpLnNob3coKTtcclxuICAgICAgICAgICAgX3NjZW5lczMuZmluZCgnLmNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGlmKHdlYkRhdGEucGcxUzN0aW1lb3V0KSBjbGVhclRpbWVvdXQod2ViRGF0YS5wZzFTM3RpbWVvdXQpO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLnBnMVMzdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBfc2NlbmVzMy5maW5kKCcuY29udGVudCcpLmZhZGVJbigzMDAsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlMXNlY2VuZXMzU2NvcmVhbmkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LDEzMDApO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBfc2NlbmVzMy5maW5kKCcuY29udGVudCcpLmZhZGVPdXQoKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhZ2Uxc2VjZW5lczNTY29yZWFuaSgpe1xyXG4gICAgICAgIHZhciBfc2NvcmUgPSAkKCcud3JhcHBlcmluIC5wYWdlMSAuc2NlbmVzX2FsbCAuc2NlbmVzMyAuc2NvcmUnKTtcclxuICAgICAgICB2YXIgX25vd251bWJlciA9IF9zY29yZS50ZXh0KCk7XHJcbiAgICAgICAgaWYoX25vd251bWJlciA8IHdlYkRhdGEubm93c2NvcmVwZXJjZW50KXtcclxuICAgICAgICAgICAgX25vd251bWJlcj1fbm93bnVtYmVyKjEgKyAxO1xyXG4gICAgICAgICAgICB3ZWJEYXRhLnRyZWVTbWFsbEZyYW1lID0gX25vd251bWJlcjtcclxuICAgICAgICAgICAgd2ViRGF0YS5wZzFTM3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cGFnZTFzZWNlbmVzM1Njb3JlYW5pKCk7fSwzMyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9zY29yZS5odG1sKF9ub3dudW1iZXIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlUGFnZSgpe1xyXG4gICAgXHRpZih3ZWJEYXRhLnByZXBhZ2UgPT0yIHx8IHdlYkRhdGEucHJlcGFnZSA9PTQgfHwgd2ViRGF0YS5ub3dwYWdlID09MiB8fCB3ZWJEYXRhLm5vd3BhZ2UgPT00KXtcclxuICAgIFx0XHRpZih3ZWJEYXRhLm5vd3BhZ2UgPT0yIHx8IHdlYkRhdGEubm93cGFnZSA9PTQpe1xyXG4gICAgXHRcdFx0aWYod2ViRGF0YS5wcmVwYWdlPT0xIHx8IHdlYkRhdGEucHJlcGFnZT09Mykgd2ViRGF0YS53cnAuZmluZCgnLndyYXBwZXJpbicpLmF0dHIoJ2NsYXNzJywnd3JhcHBlcmluIHBhZ2UnICsgd2ViRGF0YS5wcmVwYWdlKTtcclxuICAgIFx0XHRcdCQoJy53cmFwcGVyX3RvcCcpLmZpbmQoJy5wYWdlJykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICBcdFx0XHRpZih3ZWJEYXRhLnByZXBhZ2UgPT0yIHx8IHdlYkRhdGEucHJlcGFnZSA9PTQpICQoJy53cmFwcGVyX3RvcCcpLmZpbmQoJy5wYWdlJykuYWRkQ2xhc3MoJ3llcycpO1xyXG4gICAgXHRcdFx0JCgnLndyYXBwZXJfdG9wJykuZmluZCgnLnBhZ2UnICsgd2ViRGF0YS5ub3dwYWdlKS5hZGRDbGFzcygnb24nKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0ZWxzZXtcclxuICAgIFx0XHRcdHdlYkRhdGEud3JwLmZpbmQoJy53cmFwcGVyaW4nKS5hdHRyKCdjbGFzcycsJ3dyYXBwZXJpbicpO1xyXG4gICAgXHRcdFx0JCgnLndyYXBwZXJfdG9wJykuZmluZCgnLnBhZ2UnKS5yZW1vdmVDbGFzcygneWVzJyk7XHJcbiAgICBcdFx0fVxyXG4gICAgXHRcdHdlYkRhdGEud3JwLmZpbmQoJy53cmFwcGVyaW4nKS5hZGRDbGFzcygnb2ZmJyk7XHJcbiAgICBcdFx0aWYod2ViRGF0YS53cmFwcGVyVGltZW91dCkgY2xlYXJUaW1lb3V0KHdlYkRhdGEud3JhcHBlclRpbWVvdXQpO1xyXG4gICAgXHRcdHdlYkRhdGEud3JhcHBlclRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7d2ViRGF0YS53cnAuZmluZCgnLndyYXBwZXJpbicpLnJlbW92ZUNsYXNzKCdvZmYnKTt9LHdlYkRhdGEucGFnZXNwZWVkKTtcclxuICAgIFx0fVxyXG4gICAgICAgIGlmKHdlYkRhdGEubm93cGFnZSA9PTEgfHwgd2ViRGF0YS5ub3dwYWdlID09MykgJCgnLndyYXBwZXJfdG9wJykuZmluZCgnLnBhZ2UnKS5yZW1vdmVDbGFzcygnb24nKTtcclxuICAgICAgICBpZih3ZWJEYXRhLm5vd3BhZ2U9PTEpIGNoYW5nZXBhZ2UxU2NlbmVzKCk7XHJcbiAgICAgICAgaWYod2ViRGF0YS5ub3dwYWdlPT0yKXtcclxuICAgICAgICAgICAgJCgnLnBhZ2UyJykuZmluZCgnLmNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGlmKHdlYkRhdGEucGczdGltZW91dCkgY2xlYXJUaW1lb3V0KHdlYkRhdGEucGczdGltZW91dCk7XHJcbiAgICAgICAgICAgIHdlYkRhdGEucGczdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoJy5wYWdlMicpLmZpbmQoJy5jb250ZW50JykuZmFkZUluKCk7XHJcbiAgICAgICAgICAgIH0sMTMwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHdlYkRhdGEubm93cGFnZT09NCl7XHJcbiAgICAgICAgICAgICAkKCcucGFnZTQnKS5maW5kKCcuY29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgaWYod2ViRGF0YS5wZzN0aW1lb3V0KSBjbGVhclRpbWVvdXQod2ViRGF0YS5wZzN0aW1lb3V0KTtcclxuICAgICAgICAgICAgd2ViRGF0YS5wZzN0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJCgnLnBhZ2U0JykuZmluZCgnLmNvbnRlbnQnKS5mYWRlSW4oKTtcclxuICAgICAgICAgICAgICAgIHdlYkRhdGEucGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgICAgICAgICB9LDEzMDApO1xyXG4gICAgICAgIH1lbHNle2lmKHdlYkRhdGEucGxheWVyKSB3ZWJEYXRhLnBsYXllci5wYXVzZVZpZGVvKCk7fVxyXG4gICAgICAgIGlmKHdlYkRhdGEubm93cGFnZT09Myl7XHJcbiAgICAgICAgICAgICQoJy5mb290ZXIgLmdvYnRuJykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICBjaGFuZ2VwYWdlM1NjZW5lcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICQoJy5mb290ZXIgLmdvYnRuJykuZmFkZUluKCk7XHJcbiAgICBcdHdlYkRhdGEud3JwLmF0dHIoJ2NsYXNzJywnd3JhcHBlcicpLmFkZENsYXNzKCdwYWdlJyArIHdlYkRhdGEubm93cGFnZSk7XHJcbiAgICBcdHdlYkRhdGEucHJlcGFnZSA9IHdlYkRhdGEubm93cGFnZTsgICAgXHRcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGluaXRNYXAoKXtcclxuICAgICAgICAvL0luc2VydCBDaXR5IERhdGFcclxuICAgICAgICB3ZWJEYXRhLm5vd0NpdHkgPSAwOyAgICAgICAgXHJcbiAgICAgICAgJCgnLm1hcGRhdGEgLmNpdHknKS5odG1sKCcnKTtcclxuICAgICAgICBmb3IoaSBpbiB3ZWJEYXRhLnNob3BkYXRhKSAkKCcubWFwZGF0YSAuY2l0eScpLmFwcGVuZCgnPG9wdGlvbj4nKyB3ZWJEYXRhLnNob3BkYXRhW2ldLmNpdHkgKyc8L29wdGlvbj4nKTtcclxuICAgICAgICAkKCcubWFwZGF0YSAuY2l0eScpLmNoYW5nZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB3ZWJEYXRhLm5vd0NpdHkgPSAkKCcubWFwZGF0YSAuY2l0eSBvcHRpb246c2VsZWN0ZWQnKS5pbmRleCgpO1xyXG4gICAgICAgICAgICBjaGFuZ2VDaXR5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLm1hcGRhdGEgLmFyZWEnKS5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgd2ViRGF0YS5ub3dBcmVhID0gJCgnLm1hcGRhdGEgLmFyZWEgb3B0aW9uOnNlbGVjdGVkJykuaW5kZXgoKTtcclxuICAgICAgICAgICAgY2hhbmdlQXJlYSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL1N0YXJ0XHJcbiAgICAgICAgd2ViRGF0YS5IYXNDb21wbGV0ICs9IDE7XHJcbiAgICAgICAgY2hlY2tMb2FkaW5nKCk7XHJcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYW5nZUNpdHkoKTt9LDE1MDApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlQ2l0eSgpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwid2ViRGF0YS5ub3dDaXR5OlwiK3dlYkRhdGEubm93Q2l0eSk7XHJcbiAgICAgICAgd2ViRGF0YS5ub3dBcmVhID0gMDtcclxuICAgICAgICAkKCcubWFwZGF0YSAuYXJlYScpLmh0bWwoJycpO1xyXG4gICAgICAgIGZvcihpIGluIHdlYkRhdGEuc2hvcGRhdGFbd2ViRGF0YS5ub3dDaXR5XS5TVE9SRVMpICQoJy5tYXBkYXRhIC5hcmVhJykuYXBwZW5kKCc8b3B0aW9uPicrIHdlYkRhdGEuc2hvcGRhdGFbd2ViRGF0YS5ub3dDaXR5XS5TVE9SRVNbaV0uU1RPUkUgKyc8L29wdGlvbj4nKTtcclxuICAgICAgICBjaGFuZ2VBcmVhKCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VBcmVhKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ3ZWJEYXRhLm5vd0FyZWE6XCIrd2ViRGF0YS5ub3dBcmVhKTtcclxuICAgICAgICAkKCcuc2hvcF9hZGRyJykuaHRtbCh3ZWJEYXRhLnNob3BkYXRhW3dlYkRhdGEubm93Q2l0eV0uU1RPUkVTW3dlYkRhdGEubm93QXJlYV0uQUREUkVTUyk7XHJcbiAgICAgICAgdmFyIF9zaG9wID0gd2ViRGF0YS5zaG9wZGF0YVt3ZWJEYXRhLm5vd0NpdHldLlNUT1JFU1t3ZWJEYXRhLm5vd0FyZWFdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiX3Nob3AuTEFUOlwiK19zaG9wLkxBVCtcIi9cIitcIl9zaG9wLkxORzpcIitfc2hvcC5MTkcpO1xyXG4gICAgICAgIHdlYkRhdGEubWFwT3B0aW9ucyA9IHt6b29tOiAxOCxjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoX3Nob3AuTEFULCBfc2hvcC5MTkcpfVxyXG4gICAgICAgIHdlYkRhdGEubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwQ2FudmFzJyksd2ViRGF0YS5tYXBPcHRpb25zKTsgXHJcbiAgICAgICAgdmFyIGJlYWNoTWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7cG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoX3Nob3AuTEFULCBfc2hvcC5MTkcpLG1hcDogd2ViRGF0YS5tYXAsaWNvbjogd2ViRGF0YS5tYXBpbWFnZX0pO1xyXG4gICAgICAgIHdlYkRhdGEubWFwLnNldENlbnRlcihuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKF9zaG9wLkxBVCwgX3Nob3AuTE5HKSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVWaWRlbyhfaWQpe1xyXG4gICAgICAgIHdlYkRhdGEucGxheWVyID0gbmV3IFlULlBsYXllcigncGxheWVyJywge1xyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgdmlkZW9JZDogX2lkLFxyXG4gICAgICAgICAgcGxheWVyVmFyczp7XHJcbiAgICAgICAgICAgICdjb250cm9scyc6MSxcclxuICAgICAgICAgICAgJ2F1dG9wbGF5JzpmYWxzZSxcclxuICAgICAgICAgICAgJ2VuYWJsZWpzYXBpJzonMCcsXHJcbiAgICAgICAgICAgICdoZCc6JzEnLFxyXG4gICAgICAgICAgICAncmVsJzonMCcsXHJcbiAgICAgICAgICAgICdzaG93aW5mbyc6JzAnLFxyXG4gICAgICAgICAgICAnbW9kZXN0YnJhbmRpbmcnOicxJyxcclxuICAgICAgICAgICAgJ2NjX2xvYWRfcG9saWN5JzonMScsXHJcbiAgICAgICAgICAgICd3bW9kZSc6J3RyYW5zcGFyZW50JyAgICAgIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pOyAgICAgXHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB3aW5kb3dJbml0KCl7XHJcbiAgICAgICAgdmFyIF9yYW5kb20gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCkrMTtcclxuICAgICAgICAkKCcudXNlcl9jb2RlJykucGFyZW50KCkucHJlcGVuZCgnPGltZyBzcmM9XCInKyB3ZWJEYXRhLmJhY2tlbmR1cmwgKydhcGlfdmNvZGUuYXNoeD8nK19yYW5kb20rJ1wiIGNsYXNzPVwiY29kZVwiPicpO1xyXG4gICAgICAgIGNyZWF0ZVZpZGVvKCdBb1Q0UTZOUGpjbycpO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHdlYkRhdGEuYmFja2VuZHVybCArICdhcGlfc3RvcmUuYXNoeCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5zaG9wZGF0YSA9IGRhdGEuREFUQTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLlJTPT1cIk9LXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRNYXAoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGNvbnNvbGUubG9nKGRhdGEuUlMpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9LGVycm9yOiBmdW5jdGlvbih4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOlwiLCB4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hlY2tMb2FkaW5nKCl7XHJcbiAgICAgICAgaWYod2ViRGF0YS5IYXNDb21wbGV0ID49IDIpIHNob3dMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBlbHNlIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGVja0xvYWRpbmcoKTt9LDMwMCk7ICAgICBcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFkZHJDaGFuZ2UoKXtcclxuICAgIFx0dmFyIHZhbHVlID0gJC5hZGRyZXNzLnZhbHVlKCk7XHJcblx0XHRzd2l0Y2godmFsdWUpIHtcclxuXHRcdFx0Y2FzZSAnLyc6XHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcImluZGV4Lmh0bWwjL3BhZ2UxXCI7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTEnOlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfniZnpvabmgKXoqLrlrqQnKTtcclxuXHRcdFx0XHR3ZWJEYXRhLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5wYWdlMXNjZW5lcyA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTE/c2NlbmVzPTInOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+eJmem9pue3iuaApeaqouafpScpO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5ub3dwYWdlID0gMTtcclxuICAgICAgICAgICAgICAgIHdlYkRhdGEucGFnZTFzY2VuZXMgPSAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnL3BhZ2UxP3NjZW5lcz0zJzpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfoqLrmlrfntZDmnpwnKTtcclxuICAgICAgICAgICAgICAgIHdlYkRhdGEubm93cGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgICB3ZWJEYXRhLnBhZ2Uxc2NlbmVzID0gMztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdGNhc2UgJy9wYWdlMic6XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ+eJmem9puaxguiouumgiOefpScpO1xyXG5cdFx0XHRcdHdlYkRhdGEubm93cGFnZSA9IDI7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvcGFnZTMnOlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfnq4vljbPntKLlj5YnKTtcclxuXHRcdFx0XHR3ZWJEYXRhLm5vd3BhZ2UgPSAzO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5wYWdlM3NjZW5lcyA9IDE7XHJcblx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcvcGFnZTQnOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aVkeaVkeeJmem9plRWQycpO1xyXG4gICAgICAgICAgICAgICAgd2ViRGF0YS5ub3dwYWdlID0gNDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJy9wYWdlNSc6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn54mZ6b2m5YGl5bq36Ieq5pWR5rOVJyk7XHJcbiAgICAgICAgICAgICAgICB3ZWJEYXRhLm5vd3BhZ2UgPSAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHRcdH1cclxuXHRcdGNoYW5nZVBhZ2UoKTtcclxuICAgIH1cclxuICBcdGZ1bmN0aW9uIHNob3dMb2FkaW5nKF90KXtcclxuICBcdFx0aWYoX3QpICQoJy5sb2FkaW5nJykuZmFkZUluKCk7XHJcbiAgXHRcdGVsc2UgJCgnLmxvYWRpbmcnKS5mYWRlT3V0KCk7XHJcbiAgXHR9XHJcbn0pLy9yZWFkeSBlbmQgIFxyXG5mdW5jdGlvbiBnZXRVcmxWYXJzKCl7XHJcbiAgICB2YXIgdmFycz1bXSxoYXNoO3ZhciBoYXNoZXM9d2luZG93LmxvY2F0aW9uLmhyZWYuc2xpY2Uod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpKzEpLnNwbGl0KCcmJyk7XHJcbiAgICBmb3IodmFyIGk9MDtpPGhhc2hlcy5sZW5ndGg7aSsrKXtoYXNoPWhhc2hlc1tpXS5zcGxpdCgnPScpO3ZhcnMucHVzaChoYXNoWzBdKTt2YXJzW2hhc2hbMF1dPWhhc2hbMV19XHJcbiAgICByZXR1cm4gdmFyc1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
